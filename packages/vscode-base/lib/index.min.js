"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function __decorate(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function __param(e,t){return function(r,i){t(r,i,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{l(i.next(e))}catch(e){s(e)}}function a(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))}function __classPrivateFieldGet(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function __classPrivateFieldSet(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}function illegalState(e){return e?new Error("Illegal state: "+e):new Error("Illegal state")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cookie=void 0,function(e){function t(e){if(!e)return e;let t=e;for(;t!=decodeURIComponent(e);)t=decodeURIComponent(e);const r=["<",">","'",'"',"%3c","%3e","%27","%22","%253c","%253e","%2527","%2522"],i=["&#x3c;","&#x3e;","&#x27;","&#x22;","%26%23x3c%3B","%26%23x3e%3B","%26%23x27%3B","%26%23x22%3B","%2526%2523x3c%253B","%2526%2523x3e%253B","%2526%2523x27%253B","%2526%2523x22%253B"];for(let e=0;e<r.length;e++)t=t.replace(new RegExp(r[e],"gi"),i[e]);return t}function r(e){const r=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return r?t(r.pop()):void 0}e.get=r,e.set=function(e,t,r,i,n){const s=new Date;n&&s.setTime(s.getTime()+36e5*n),document.cookie=`${e}=${t}; ${n?`expires=${s.toUTCString()};`:""}domain=${r||window.location.host};path=${i||"/"};`},e.deleteCookie=function(e,t,r){document.cookie=`${e}=; expires=Mon, 26 Jul 1997 05:00:00 GMT;path=${r||"/"};domain=${t||window.location.host};`},e.setDirect=function(e){const r=t(e);r&&(document.cookie=r)},e.getCRSFToken=function(){const e=r("qqmusic_key");let t=5381;if(e)for(let r=0,i=e.length;r<i;++r)t+=(t<<5)+e.charCodeAt(r);return 2147483647&t}}(exports.Cookie||(exports.Cookie={})),exports.User=void 0,function(e){let t=0;e.getUin=function(){if(t)return t;let e=exports.Cookie.get("uin")||0;return"string"==typeof e?0===e.indexOf("o")&&(e=e.substring(1,e.length)):e<1e4&&(e=0),t=e,e}}(exports.User||(exports.User={}));class ErrorHandler{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const errorHandler=new ErrorHandler;function setUnexpectedErrorHandler(e){errorHandler.setUnexpectedErrorHandler(e)}function onUnexpectedError(e){isPromiseCanceledError(e)||errorHandler.onUnexpectedError(e)}const canceledName="Canceled";function canceled(){const e=new Error("Canceled");return e.name=e.message,e}function isPromiseCanceledError(e){return e instanceof Error&&"Canceled"===e.name&&"Canceled"===e.message}function tail(e,t=0){return e[e.length-(1+t)]}function tail2(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}function equals(e,t,r=((e,t)=>e===t)){if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!r(e[i],t[i]))return!1;return!0}function binarySearch(e,t,r){let i=0,n=e.length-1;for(;i<=n;){const s=(i+n)/2|0,o=r(e[s],t);if(o<0)i=s+1;else{if(!(o>0))return s;n=s-1}}return-(i+1)}function findFirstInSorted(e,t){let r=0,i=e.length;if(0===i)return 0;for(;r<i;){const n=Math.floor((r+i)/2);t(e[n])?i=n:r=n+1}return r}function quickSelect(e,t,r){if((e|=0)>=t.length)throw new TypeError("invalid index");let i=t[Math.floor(t.length*Math.random())],n=[],s=[],o=[];for(let e of t){const t=r(e,i);t<0?n.push(e):t>0?s.push(e):o.push(e)}return e<n.length?quickSelect(e,n,r):e<n.length+o.length?o[0]:quickSelect(e-(n.length+o.length),s,r)}function groupBy(e,t){const r=[];let i=void 0;for(const n of e.slice(0).sort(t))i&&0===t(i[0],n)?i.push(n):(i=[n],r.push(i));return r}function sortedDiff(e,t,r){const i=[];function n(e,t,r){if(0===t&&0===r.length)return;const n=i[i.length-1];n&&n.start+n.deleteCount===e?(n.deleteCount+=t,n.toInsert.push(...r)):i.push({start:e,deleteCount:t,toInsert:r})}let s=0,o=0;for(;;){if(s===e.length){n(s,0,t.slice(o));break}if(o===t.length){n(s,e.length-s,[]);break}const i=e[s],a=t[o],l=r(i,a);0===l?(s+=1,o+=1):l<0?(n(s,1,[]),s+=1):l>0&&(n(s,0,[a]),o+=1)}return i}function delta(e,t,r){const i=sortedDiff(e,t,r),n=[],s=[];for(const t of i)n.push(...e.slice(t.start,t.start+t.deleteCount)),s.push(...t.toInsert);return{removed:n,added:s}}function top(e,t,r){if(0===r)return[];const i=e.slice(0,r).sort(t);return topStep(e,t,i,r,e.length),i}function topAsync(e,t,r,i,n){return 0===r?Promise.resolve([]):new Promise((s,o)=>{(()=>__awaiter(this,void 0,void 0,(function*(){const s=e.length,o=e.slice(0,r).sort(t);for(let a=r,l=Math.min(r+i,s);a<s;a=l,l=Math.min(l+i,s)){if(a>r&&(yield new Promise(e=>setTimeout(e))),n&&n.isCancellationRequested)throw canceled();topStep(e,t,o,a,l)}return o})))().then(s,o)})}function topStep(e,t,r,i,n){for(const s=r.length;i<n;i++){const n=e[i];if(t(n,r[s-1])<0){r.pop();const e=findFirstInSorted(r,e=>t(n,e)<0);r.splice(e,0,n)}}}function coalesce(e){return e.filter(e=>!!e)}function coalesceInPlace(e){let t=0;for(let r=0;r<e.length;r++)e[r]&&(e[t]=e[r],t+=1);e.length=t}function move(e,t,r){e.splice(r,0,e.splice(t,1)[0])}function isFalsyOrEmpty(e){return!Array.isArray(e)||0===e.length}function isNonEmptyArray(e){return Array.isArray(e)&&e.length>0}function distinct(e,t){if(!t)return e.filter((t,r)=>e.indexOf(t)===r);const r=Object.create(null);return e.filter(e=>{const i=t(e);return!r[i]&&(r[i]=!0,!0)})}function distinctES6(e){const t=new Set;return e.filter(e=>!t.has(e)&&(t.add(e),!0))}function uniqueFilter(e){const t=Object.create(null);return r=>{const i=e(r);return!t[i]&&(t[i]=!0,!0)}}function lastIndex(e,t){for(let r=e.length-1;r>=0;r--){if(t(e[r]))return r}return-1}function firstOrDefault(e,t){return e.length>0?e[0]:t}function commonPrefixLength$1(e,t,r=((e,t)=>e===t)){let i=0;for(let n=0,s=Math.min(e.length,t.length);n<s&&r(e[n],t[n]);n++)i++;return i}function flatten(e){return[].concat(...e)}function range(e,t){let r="number"==typeof t?e:0;"number"==typeof t?r=e:(r=0,t=e);const i=[];if(r<=t)for(let e=r;e<t;e++)i.push(e);else for(let e=r;e>t;e--)i.push(e);return i}function index(e,t,r){return e.reduce((e,i)=>(e[t(i)]=r?r(i):i,e),Object.create(null))}function insert(e,t){return e.push(t),()=>remove(e,t)}function remove(e,t){const r=e.indexOf(t);if(r>-1)return e.splice(r,1),t}function arrayInsert(e,t,r){const i=e.slice(0,t),n=e.slice(t);return i.concat(r,n)}function shuffle(e,t){let r;if("number"==typeof t){let e=t;r=()=>{const t=179426549*Math.sin(e++);return t-Math.floor(t)}}else r=Math.random;for(let t=e.length-1;t>0;t-=1){const i=Math.floor(r()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}}function pushToStart(e,t){const r=e.indexOf(t);r>-1&&(e.splice(r,1),e.unshift(t))}function pushToEnd(e,t){const r=e.indexOf(t);r>-1&&(e.splice(r,1),e.push(t))}function mapArrayOrNot(e,t){return Array.isArray(e)?e.map(t):t(e)}function asArray(e){return Array.isArray(e)?e:[e]}function getRandomElement(e){return e[Math.floor(Math.random()*e.length)]}function mapFind(e,t){for(const r of e){const e=t(r);if(void 0!==e)return e}}function insertInto(e,t,r){const i=getActualStartIndex(e,t),n=e.length,s=r.length;e.length=n+s;for(let t=n-1;t>=i;t--)e[t+s]=e[t];for(let t=0;t<s;t++)e[t+i]=r[t]}function splice(e,t,r,i){const n=getActualStartIndex(e,t),s=e.splice(n,r);return insertInto(e,n,i),s}function getActualStartIndex(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}function minIndex(e,t){let r=Number.MAX_SAFE_INTEGER,i=0;return e.forEach((e,n)=>{const s=t(e);s<r&&(r=s,i=n)}),i}function maxIndex(e,t){let r=Number.MIN_SAFE_INTEGER,i=0;return e.forEach((e,n)=>{const s=t(e);s>r&&(r=s,i=n)}),i}class ArrayQueue{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const r=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,r}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const r=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,r}}function once(e){const t=this;let r,i=!1;return function(){return i||(i=!0,r=e.apply(t,arguments)),r}}exports.Iterable=void 0,function(e){e.is=function(e){return e&&"object"==typeof e&&"function"==typeof e[Symbol.iterator]};const t=Object.freeze([]);e.empty=function(){return t},e.single=function*(e){yield e},e.from=function(e){return e||t},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){for(const r of e)if(t(r))return!0;return!1},e.find=function(e,t){for(const r of e)if(t(r))return r},e.filter=function*(e,t){for(const r of e)t(r)&&(yield r)},e.map=function*(e,t){let r=0;for(const i of e)yield t(i,r++)},e.concat=function*(...e){for(const t of e)for(const e of t)yield e},e.concatNested=function*(e){for(const t of e)for(const e of t)yield e},e.reduce=function(e,t,r){let i=r;for(const r of e)i=t(i,r);return i},e.slice=function*(e,t,r=e.length){for(t<0&&(t+=e.length),r<0?r+=e.length:r>e.length&&(r=e.length);t<r;t++)yield e[t]},e.consume=function(t,r=Number.POSITIVE_INFINITY){const i=[];if(0===r)return[i,t];const n=t[Symbol.iterator]();for(let t=0;t<r;t++){const t=n.next();if(t.done)return[i,e.empty()];i.push(t.value)}return[i,{[Symbol.iterator]:()=>n}]},e.equals=function(e,t,r=((e,t)=>e===t)){const i=e[Symbol.iterator](),n=t[Symbol.iterator]();for(;;){const e=i.next(),t=n.next();if(e.done!==t.done)return!1;if(e.done)return!0;if(!r(e.value,t.value))return!1}}}(exports.Iterable||(exports.Iterable={}));let disposableTracker=null;function setDisposableTracker(e){disposableTracker=e}function trackDisposable(e){return null==disposableTracker||disposableTracker.trackDisposable(e),e}function markAsDisposed(e){null==disposableTracker||disposableTracker.markAsDisposed(e)}function setParentOfDisposable(e,t){null==disposableTracker||disposableTracker.setParent(e,t)}function setParentOfDisposables(e,t){if(disposableTracker)for(const r of e)disposableTracker.setParent(r,t)}function markAsSingleton(e){return null==disposableTracker||disposableTracker.markAsSingleton(e),e}class MultiDisposeError extends Error{constructor(e){super(`Encountered errors while disposing of store. Errors: [${e.join(", ")}]`),this.errors=e}}function isDisposable(e){return"function"==typeof e.dispose&&0===e.dispose.length}function dispose(e){if(exports.Iterable.is(e)){let t=[];for(const r of e)if(r)try{r.dispose()}catch(e){t.push(e)}if(1===t.length)throw t[0];if(t.length>1)throw new MultiDisposeError(t);return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function combinedDisposable(...e){const t=toDisposable(()=>dispose(e));return setParentOfDisposables(e,t),t}function toDisposable(e){const t=trackDisposable({dispose:once(()=>{markAsDisposed(t),e()})});return t}class DisposableStore{constructor(){this._toDispose=new Set,this._isDisposed=!1,trackDisposable(this)}dispose(){this._isDisposed||(markAsDisposed(this),this._isDisposed=!0,this.clear())}clear(){try{dispose(this._toDispose.values())}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return setParentOfDisposable(e,this),this._isDisposed?DisposableStore.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}}DisposableStore.DISABLE_DISPOSED_WARNING=!1;class Disposable{constructor(){this._store=new DisposableStore,trackDisposable(this),setParentOfDisposable(this._store,this)}dispose(){markAsDisposed(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Disposable.None=Object.freeze({dispose(){}});class MutableDisposable{constructor(){this._isDisposed=!1,trackDisposable(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),e&&setParentOfDisposable(e,this),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,markAsDisposed(this),null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e&&setParentOfDisposable(e,null),e}}class RefCountedDisposable{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return 0==--this._counter&&this._disposable.dispose(),this}}class ReferenceCollection{constructor(){this.references=new Map}acquire(e,...t){let r=this.references.get(e);r||(r={counter:0,object:this.createReferencedObject(e,...t)},this.references.set(e,r));const{object:i}=r,n=once(()=>{0==--r.counter&&(this.destroyReferencedObject(e,r.object),this.references.delete(e))});return r.counter++,{object:i,dispose:n}}}class AsyncReferenceCollection{constructor(e){this.referenceCollection=e}acquire(e,...t){return __awaiter(this,void 0,void 0,(function*(){const r=this.referenceCollection.acquire(e,...t);try{return{object:yield r.object,dispose:()=>r.dispose()}}catch(e){throw r.dispose(),e}}))}}class ImmortalReference{constructor(e){this.object=e}dispose(){}}class Node$1{constructor(e){this.element=e,this.next=Node$1.Undefined,this.prev=Node$1.Undefined}}Node$1.Undefined=new Node$1(void 0);class LinkedList{constructor(){this._first=Node$1.Undefined,this._last=Node$1.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Node$1.Undefined}shift(){if(this._first!==Node$1.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Node$1.Undefined){const e=this._last.element;return this._remove(this._last),e}}clear(){let e=this._first;for(;e!==Node$1.Undefined;){const t=e.next;e.prev=Node$1.Undefined,e.next=Node$1.Undefined,e=t}this._first=Node$1.Undefined,this._last=Node$1.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const r=new Node$1(e);if(this._first===Node$1.Undefined)this._first=r,this._last=r;else if(t){const e=this._last;this._last=r,r.prev=e,e.next=r}else{const e=this._first;this._first=r,r.next=e,e.prev=r}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(r))}}_remove(e){if(e.prev!==Node$1.Undefined&&e.next!==Node$1.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Node$1.Undefined&&e.next===Node$1.Undefined?(this._first=Node$1.Undefined,this._last=Node$1.Undefined):e.next===Node$1.Undefined?(this._last=this._last.prev,this._last.next=Node$1.Undefined):e.prev===Node$1.Undefined&&(this._first=this._first.next,this._first.prev=Node$1.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Node$1.Undefined;)yield e.element,e=e.next}}var _a$1;let _isWindows=!1,_isMacintosh=!1,_isLinux=!1,_isLinuxSnap=!1,_isNative=!1,_isWeb=!1,_isIOS=!1,_isAndroid=!1,_isMusic=!1,_userAgent=void 0;const globals="object"==typeof self?self:"object"==typeof global?global:{};let nodeProcess=void 0;void 0!==globals.qqmusic&&void 0!==globals.qqmusic.process?nodeProcess=globals.qqmusic.process:"undefined"!=typeof process&&(nodeProcess=process);const isElectronRenderer="string"==typeof(null===(_a$1=null==nodeProcess?void 0:nodeProcess.versions)||void 0===_a$1?void 0:_a$1.electron)&&"renderer"===nodeProcess.type,setImmediate=function(){if(globals.setImmediate)return globals.setImmediate.bind(globals);if("function"==typeof globals.postMessage&&!globals.importScripts){let e=[];globals.addEventListener("message",t=>{if(t.data&&t.data.vscodeSetImmediateId)for(let r=0,i=e.length;r<i;r++){const i=e[r];if(i.id===t.data.vscodeSetImmediateId)return e.splice(r,1),void i.callback()}});let t=0;return r=>{const i=++t;e.push({id:i,callback:r}),globals.postMessage({vscodeSetImmediateId:i},"*")}}if("function"==typeof(null==nodeProcess?void 0:nodeProcess.nextTick))return nodeProcess.nextTick.bind(nodeProcess);const e=Promise.resolve();return t=>e.then(t)}();function PlatformToString(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}"object"!=typeof navigator||isElectronRenderer?"object"==typeof nodeProcess&&(_isWindows="win32"===nodeProcess.platform,_isMacintosh="darwin"===nodeProcess.platform,_isLinux="linux"===nodeProcess.platform,_isLinuxSnap=_isLinux&&!!nodeProcess.env.SNAP&&!!nodeProcess.env.SNAP_REVISION,_isNative=!0):(_userAgent=navigator.userAgent,_isWindows=_userAgent.indexOf("Windows")>=0,_isMacintosh=_userAgent.indexOf("Macintosh")>=0,_isIOS=(_userAgent.indexOf("Macintosh")>=0||_userAgent.indexOf("iPad")>=0||_userAgent.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,_isLinux=_userAgent.indexOf("Linux")>=0,_isAndroid=_userAgent.indexOf("Android")>=0,_isMusic=Boolean(_userAgent.match(/\bQQMUSIC\/(\d[\.\d]*)/i))||Boolean(_userAgent.match(/QQMUSIC\/(\d[\.\d]*)/i)),_isWeb=!0),exports.Platform=void 0,function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"}(exports.Platform||(exports.Platform={}));let _platform=0;_isMacintosh?_platform=1:_isWindows?_platform=3:_isLinux&&(_platform=2);const isWindows=_isWindows,isMacintosh=_isMacintosh,isLinux=_isLinux,isLinuxSnap=_isLinuxSnap,isNative=_isNative,isWeb=_isWeb,isIOS=_isIOS,isAndroid=_isAndroid,platform$1=_platform,userAgent=_userAgent,isMusic=_isMusic,isMobile=isIOS||isAndroid;let _isLittleEndian=!0,_isLittleEndianComputed=!1;function isLittleEndian(){if(!_isLittleEndianComputed){_isLittleEndianComputed=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const t=new Uint16Array(e.buffer);_isLittleEndian=513===t[0]}return _isLittleEndian}const hasPerformanceNow=globals.performance&&"function"==typeof globals.performance.now;class StopWatch{constructor(e){this._highResolution=hasPerformanceNow&&e,this._startTime=this._now(),this._stopTime=-1}static create(e=!0){return new StopWatch(e)}_now(){return this._highResolution?globals.performance.now():Date.now()}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}}exports.Event=void 0,function(e){function t(e){return(t,r=null,i)=>{let n,s=!1;return n=e(e=>{if(!s)return n?n.dispose():s=!0,t.call(r,e)},null,i),s&&n.dispose(),n}}function r(e,t){return o((r,i=null,n)=>e(e=>r.call(i,t(e)),null,n))}function i(e,t){return o((r,i=null,n)=>e(e=>{t(e),r.call(i,e)},null,n))}function n(e,t){return o((r,i=null,n)=>e(e=>t(e)&&r.call(i,e),null,n))}function s(e,t,i){let n=i;return r(e,e=>(n=t(n,e),n))}function o(e){let t;const r=new Emitter({onFirstListenerAdd(){t=e(r.fire,r)},onLastListenerRemove(){t.dispose()}});return r.event}function a(e,t,r=100,i=!1,n){let s,o=void 0,a=void 0,l=0;const c=new Emitter({leakWarningThreshold:n,onFirstListenerAdd(){s=e(e=>{l++,o=t(o,e),i&&!a&&(c.fire(o),o=void 0),clearTimeout(a),a=setTimeout(()=>{const e=o;o=void 0,a=void 0,(!i||l>1)&&c.fire(e),l=0},r)})},onLastListenerRemove(){s.dispose()}});return c.event}function l(e,t=((e,t)=>e===t)){let r,i=!0;return n(e,e=>{const n=i||!t(e,r);return i=!1,r=e,n})}e.None=()=>Disposable.None,e.once=t,e.map=r,e.forEach=i,e.filter=n,e.signal=function(e){return e},e.any=function(...e){return(t,r=null,i)=>combinedDisposable(...e.map(e=>e(e=>t.call(r,e),null,i)))},e.reduce=s,e.debounce=a,e.latch=l,e.split=function(t,r){return[e.filter(t,r),e.filter(t,e=>!r(e))]},e.buffer=function(e,t=!1,r=[]){let i=r.slice(),n=e(e=>{i?i.push(e):o.fire(e)});const s=()=>{i&&i.forEach(e=>o.fire(e)),i=null},o=new Emitter({onFirstListenerAdd(){n||(n=e(e=>o.fire(e)))},onFirstListenerDidAdd(){i&&(t?setTimeout(s):s())},onLastListenerRemove(){n&&n.dispose(),n=null}});return o.event};class c{constructor(e){this.event=e}map(e){return new c(r(this.event,e))}forEach(e){return new c(i(this.event,e))}filter(e){return new c(n(this.event,e))}reduce(e,t){return new c(s(this.event,e,t))}latch(){return new c(l(this.event))}debounce(e,t=100,r=!1,i){return new c(a(this.event,e,t,r,i))}on(e,t,r){return this.event(e,t,r)}once(e,r,i){return t(this.event)(e,r,i)}}e.chain=function(e){return new c(e)},e.fromNodeEventEmitter=function(e,t,r=(e=>e)){const i=(...e)=>n.fire(r(...e)),n=new Emitter({onFirstListenerAdd:()=>e.on(t,i),onLastListenerRemove:()=>e.removeListener(t,i)});return n.event},e.fromDOMEventEmitter=function(e,t,r=(e=>e)){const i=(...e)=>n.fire(r(...e)),n=new Emitter({onFirstListenerAdd:()=>e.addEventListener(t,i),onLastListenerRemove:()=>e.removeEventListener(t,i)});return n.event},e.toPromise=function(e){return new Promise(r=>t(e)(r))}}(exports.Event||(exports.Event={}));class EventProfiling{constructor(e){this._listenerCount=0,this._invocationCount=0,this._elapsedOverall=0,this._name=`${e}_${EventProfiling._idPool++}`}start(e){this._stopWatch=new StopWatch(!0),this._listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this._elapsedOverall+=e,this._invocationCount+=1,console.info(`did FIRE ${this._name}: elapsed_ms: ${e.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`),this._stopWatch=void 0}}}EventProfiling._idPool=0;let _globalLeakWarningThreshold=-1;function setGlobalLeakWarningThreshold(e){const t=_globalLeakWarningThreshold;return _globalLeakWarningThreshold=e,{dispose(){_globalLeakWarningThreshold=t}}}class LeakageMonitor{constructor(e,t=Math.random().toString(18).slice(2,5)){this.customThreshold=e,this.name=t,this._warnCountdown=0}dispose(){this._stacks&&this._stacks.clear()}check(e){let t=_globalLeakWarningThreshold;if("number"==typeof this.customThreshold&&(t=this.customThreshold),t<=0||e<t)return;this._stacks||(this._stacks=new Map);const r=(new Error).stack.split("\n").slice(3).join("\n"),i=this._stacks.get(r)||0;if(this._stacks.set(r,i+1),this._warnCountdown-=1,this._warnCountdown<=0){let r;this._warnCountdown=.5*t;let i=0;for(const[e,t]of this._stacks)(!r||i<t)&&(r=e,i=t);console.warn(`[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${i}):`),console.warn(r)}return()=>{const e=this._stacks.get(r)||0;this._stacks.set(r,e-1)}}}class Emitter{constructor(e){var t;this._disposed=!1,this._options=e,this._leakageMon=_globalLeakWarningThreshold>0?new LeakageMonitor(this._options&&this._options.leakWarningThreshold):void 0,this._perfMon=(null===(t=this._options)||void 0===t?void 0:t._profName)?new EventProfiling(this._options._profName):void 0}get event(){return this._event||(this._event=(e,t,r)=>{var i;this._listeners||(this._listeners=new LinkedList);const n=this._listeners.isEmpty();n&&this._options&&this._options.onFirstListenerAdd&&this._options.onFirstListenerAdd(this);const s=this._listeners.push(t?[e,t]:e);n&&this._options&&this._options.onFirstListenerDidAdd&&this._options.onFirstListenerDidAdd(this),this._options&&this._options.onListenerDidAdd&&this._options.onListenerDidAdd(this,e,t);const o=null===(i=this._leakageMon)||void 0===i?void 0:i.check(this._listeners.size),a=toDisposable(()=>{if(o&&o(),!this._disposed&&(s(),this._options&&this._options.onLastListenerRemove)){this._listeners&&!this._listeners.isEmpty()||this._options.onLastListenerRemove(this)}});return r instanceof DisposableStore?r.add(a):Array.isArray(r)&&r.push(a),a}),this._event}fire(e){var t,r;if(this._listeners){this._deliveryQueue||(this._deliveryQueue=new LinkedList);for(let t of this._listeners)this._deliveryQueue.push([t,e]);for(null===(t=this._perfMon)||void 0===t||t.start(this._deliveryQueue.size);this._deliveryQueue.size>0;){const[e,t]=this._deliveryQueue.shift();try{"function"==typeof e?e.call(void 0,t):e[0].call(e[1],t)}catch(e){onUnexpectedError(e)}}null===(r=this._perfMon)||void 0===r||r.stop()}}dispose(){var e,t,r,i,n;this._disposed||(this._disposed=!0,null===(e=this._listeners)||void 0===e||e.clear(),null===(t=this._deliveryQueue)||void 0===t||t.clear(),null===(i=null===(r=this._options)||void 0===r?void 0:r.onLastListenerRemove)||void 0===i||i.call(r),null===(n=this._leakageMon)||void 0===n||n.dispose())}}class AsyncEmitter extends Emitter{fireAsync(e,t,r){return __awaiter(this,void 0,void 0,(function*(){if(this._listeners){this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new LinkedList);for(const t of this._listeners)this._asyncDeliveryQueue.push([t,e]);for(;this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){const[e,t]=this._asyncDeliveryQueue.shift(),i=[],n=Object.assign(Object.assign({},t),{waitUntil:t=>{if(Object.isFrozen(i))throw new Error("waitUntil can NOT be called asynchronous");r&&(t=r(t,"function"==typeof e?e:e[0])),i.push(t)}});try{"function"==typeof e?e.call(void 0,n):e[0].call(e[1],n)}catch(e){onUnexpectedError(e);continue}Object.freeze(i),yield Promise.allSettled(i).then(e=>{for(const t of e)"rejected"===t.status&&onUnexpectedError(t.reason)})}}}))}}class PauseableEmitter extends Emitter{constructor(e){super(e),this._isPaused=0,this._eventQueue=new LinkedList,this._mergeFn=null==e?void 0:e.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0==--this._isPaused)if(this._mergeFn){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}fire(e){this._listeners&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}}class DebounceEmitter extends PauseableEmitter{constructor(e){var t;super(e),this._delay=null!==(t=e.delay)&&void 0!==t?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class EventMultiplexer{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new Emitter({onFirstListenerAdd:()=>this.onFirstListenerAdd(),onLastListenerRemove:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};this.events.push(t),this.hasListeners&&this.hook(t);return toDisposable(once(()=>{this.hasListeners&&this.unhook(t);const e=this.events.indexOf(t);this.events.splice(e,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(e=>this.emitter.fire(e))}unhook(e){e.listener&&e.listener.dispose(),e.listener=null}dispose(){this.emitter.dispose()}}class EventBufferer{constructor(){this.buffers=[]}wrapEvent(e){return(t,r,i)=>e(e=>{const i=this.buffers[this.buffers.length-1];i?i.push(()=>t.call(r,e)):t.call(r,e)},void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const r=e();return this.buffers.pop(),t.forEach(e=>e()),r}}class Relay{constructor(){this.listening=!1,this.inputEvent=exports.Event.None,this.inputEventListener=Disposable.None,this.emitter=new Emitter({onFirstListenerDidAdd:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onLastListenerRemove:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const shortcutEvent=Object.freeze((function(e,t){const r=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(r)}}}));class MutableToken{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?shortcutEvent:(this._emitter||(this._emitter=new Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}exports.CancellationToken=void 0,function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof MutableToken||!(!t||"object"!=typeof t)&&("boolean"==typeof t.isCancellationRequested&&"function"==typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:exports.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:shortcutEvent})}(exports.CancellationToken||(exports.CancellationToken={}));class CancellationTokenSource{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new MutableToken),this._token}cancel(){this._token?this._token instanceof MutableToken&&this._token.cancel():this._token=exports.CancellationToken.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener&&this._parentListener.dispose(),this._token?this._token instanceof MutableToken&&this._token.dispose():this._token=exports.CancellationToken.None}}function isFalsyOrWhitespace(e){return!e||"string"!=typeof e||0===e.trim().length}const _formatRegexp=/{(\d+)}/g;function format$1(e,...t){return 0===t.length?e:e.replace(_formatRegexp,(function(e,r){const i=parseInt(r,10);return isNaN(i)||i<0||i>=t.length?e:t[i]}))}const _format2Regexp=/{([^}]+)}/g;function format2(e,t){return e.replace(_format2Regexp,(e,r)=>{var i;return null!==(i=t[r])&&void 0!==i?i:e})}function escape(e){return e.replace(/[<>&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}))}function escapeRegExpCharacters(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function count(e,t){let r=0;const i=t.charCodeAt(0);for(let t=e.length-1;t>=0;t--)e.charCodeAt(t)===i&&r++;return r}function truncate(e,t,r="…"){return e.length<=t?e:`${e.substr(0,t)}${r}`}function trim(e,t=" "){return rtrim(ltrim(e,t),t)}function ltrim(e,t){if(!e||!t)return e;const r=t.length;if(0===r||0===e.length)return e;let i=0;for(;e.indexOf(t,i)===i;)i+=r;return e.substring(i)}function rtrim(e,t){if(!e||!t)return e;const r=t.length,i=e.length;if(0===r||0===i)return e;let n=i,s=-1;for(;s=e.lastIndexOf(t,n-1),-1!==s&&s+r===n;){if(0===s)return"";n=s}return e.substring(0,n)}function convertSimple2RegExpPattern(e){return e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function stripWildcards(e){return e.replace(/\*/g,"")}function createRegExp(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=escapeRegExpCharacters(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let i="";return r.global&&(i+="g"),r.matchCase||(i+="i"),r.multiline&&(i+="m"),r.unicode&&(i+="u"),new RegExp(e,i)}function regExpLeadsToEndlessLoop(e){if("^"===e.source||"^$"===e.source||"$"===e.source||"^\\s*$"===e.source)return!1;return!(!e.exec("")||0!==e.lastIndex)}function regExpContainsBackreference(e){return!!e.match(/([^\\]|^)(\\\\)*\\\d+/)}function regExpFlags(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")}function splitLines(e){return e.split(/\r\n|\r|\n/)}function firstNonWhitespaceIndex(e){for(let t=0,r=e.length;t<r;t++){const r=e.charCodeAt(t);if(32!==r&&9!==r)return t}return-1}function getLeadingWhitespace(e,t=0,r=e.length){for(let i=t;i<r;i++){const r=e.charCodeAt(i);if(32!==r&&9!==r)return e.substring(t,i)}return e.substring(t,r)}function lastNonWhitespaceIndex(e,t=e.length-1){for(let r=t;r>=0;r--){const t=e.charCodeAt(r);if(32!==t&&9!==t)return r}return-1}function compare(e,t){return e<t?-1:e>t?1:0}function compareSubstring(e,t,r=0,i=e.length,n=0,s=t.length){for(;r<i&&n<s;r++,n++){let i=e.charCodeAt(r),s=t.charCodeAt(n);if(i<s)return-1;if(i>s)return 1}const o=i-r,a=s-n;return o<a?-1:o>a?1:0}function compareIgnoreCase(e,t){return compareSubstringIgnoreCase(e,t,0,e.length,0,t.length)}function compareSubstringIgnoreCase(e,t,r=0,i=e.length,n=0,s=t.length){for(;r<i&&n<s;r++,n++){let o=e.charCodeAt(r),a=t.charCodeAt(n);if(o===a)continue;const l=o-a;if((32!==l||!isUpperAsciiLetter(a))&&(-32!==l||!isUpperAsciiLetter(o)))return isLowerAsciiLetter(o)&&isLowerAsciiLetter(a)?l:compareSubstring(e.toLowerCase(),t.toLowerCase(),r,i,n,s)}const o=i-r,a=s-n;return o<a?-1:o>a?1:0}function isLowerAsciiLetter(e){return e>=97&&e<=122}function isUpperAsciiLetter(e){return e>=65&&e<=90}function isAsciiLetter(e){return isLowerAsciiLetter(e)||isUpperAsciiLetter(e)}function equalsIgnoreCase(e,t){return e.length===t.length&&doEqualsIgnoreCase(e,t)}function doEqualsIgnoreCase(e,t,r=e.length){for(let i=0;i<r;i++){const r=e.charCodeAt(i),n=t.charCodeAt(i);if(r!==n)if(isAsciiLetter(r)&&isAsciiLetter(n)){const e=Math.abs(r-n);if(0!==e&&32!==e)return!1}else if(String.fromCharCode(r).toLowerCase()!==String.fromCharCode(n).toLowerCase())return!1}return!0}function startsWithIgnoreCase(e,t){const r=t.length;return!(t.length>e.length)&&doEqualsIgnoreCase(e,t,r)}function commonPrefixLength(e,t){let r,i=Math.min(e.length,t.length);for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function commonSuffixLength(e,t){let r,i=Math.min(e.length,t.length);const n=e.length-1,s=t.length-1;for(r=0;r<i;r++)if(e.charCodeAt(n-r)!==t.charCodeAt(s-r))return r;return i}function isHighSurrogate(e){return 55296<=e&&e<=56319}function isLowSurrogate(e){return 56320<=e&&e<=57343}function computeCodePoint(e,t){return t-56320+(e-55296<<10)+65536}function getNextCodePoint(e,t,r){const i=e.charCodeAt(r);if(isHighSurrogate(i)&&r+1<t){const t=e.charCodeAt(r+1);if(isLowSurrogate(t))return computeCodePoint(i,t)}return i}function getPrevCodePoint(e,t){const r=e.charCodeAt(t-1);if(isLowSurrogate(r)&&t>1){const i=e.charCodeAt(t-2);if(isHighSurrogate(i))return computeCodePoint(i,r)}return r}function nextCharLength(e,t){const r=GraphemeBreakTree.getInstance(),i=t,n=e.length,s=getNextCodePoint(e,n,t);t+=s>=65536?2:1;let o=r.getGraphemeBreakType(s);for(;t<n;){const i=getNextCodePoint(e,n,t),s=r.getGraphemeBreakType(i);if(breakBetweenGraphemeBreakType(o,s))break;t+=i>=65536?2:1,o=s}return t-i}function prevCharLength(e,t){const r=GraphemeBreakTree.getInstance(),i=t,n=getPrevCodePoint(e,t);t-=n>=65536?2:1;let s=r.getGraphemeBreakType(n);for(;t>0;){const i=getPrevCodePoint(e,t),n=r.getGraphemeBreakType(i);if(breakBetweenGraphemeBreakType(n,s))break;t-=i>=65536?2:1,s=n}return i-t}function _getCharContainingOffset(e,t){const r=GraphemeBreakTree.getInstance(),i=e.length,n=t,s=getNextCodePoint(e,i,t),o=r.getGraphemeBreakType(s);t+=s>=65536?2:1;let a=o;for(;t<i;){const n=getNextCodePoint(e,i,t),s=r.getGraphemeBreakType(n);if(breakBetweenGraphemeBreakType(a,s))break;t+=n>=65536?2:1,a=s}const l=t;for(t=n,a=o;t>0;){const i=getPrevCodePoint(e,t),n=r.getGraphemeBreakType(i);if(breakBetweenGraphemeBreakType(n,a))break;t-=i>=65536?2:1,a=n}return[t,l]}function getCharContainingOffset(e,t){return t>0&&isLowSurrogate(e.charCodeAt(t))?_getCharContainingOffset(e,t-1):_getCharContainingOffset(e,t)}function encodeUTF8(e){const t=e.length;let r=0,i=0;for(;i<t;){const n=getNextCodePoint(e,t,i);i+=n>=65536?2:1,r+=n<128?1:n<2048?2:n<65536?3:4}const n=new Uint8Array(r);i=0;let s=0;for(;i<t;){const r=getNextCodePoint(e,t,i);i+=r>=65536?2:1,r<128?n[s++]=r:r<2048?(n[s++]=192|(1984&r)>>>6,n[s++]=128|(63&r)>>>0):r<65536?(n[s++]=224|(61440&r)>>>12,n[s++]=128|(4032&r)>>>6,n[s++]=128|(63&r)>>>0):(n[s++]=240|(1835008&r)>>>18,n[s++]=128|(258048&r)>>>12,n[s++]=128|(4032&r)>>>6,n[s++]=128|(63&r)>>>0)}return n}function decodeUTF8(e){const t=e.byteLength,r=[];let i=0;for(;i<t;){const n=e[i];let s;if(s=n>=240&&i+3<t?(7&e[i++])<<18>>>0|(63&e[i++])<<12>>>0|(63&e[i++])<<6>>>0|(63&e[i++])<<0>>>0:n>=224&&i+2<t?(15&e[i++])<<12>>>0|(63&e[i++])<<6>>>0|(63&e[i++])<<0>>>0:n>=192&&i+1<t?(31&e[i++])<<6>>>0|(63&e[i++])<<0>>>0:e[i++],s>=0&&s<=55295||s>=57344&&s<=65535)r.push(String.fromCharCode(s));else if(s>=65536&&s<=1114111){const e=s-65536,t=55296+((1047552&e)>>>10),i=56320+((1023&e)>>>0);r.push(String.fromCharCode(t)),r.push(String.fromCharCode(i))}else r.push(String.fromCharCode(65533))}return r.join("")}const CONTAINS_RTL=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u08BD\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE33\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDCFF]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD50-\uDFFF]|\uD83B[\uDC00-\uDEBB])/;function containsRTL(e){return CONTAINS_RTL.test(e)}const CONTAINS_EMOJI=/(?:[\u231A\u231B\u23F0\u23F3\u2600-\u27BF\u2B50\u2B55]|\uD83C[\uDDE6-\uDDFF\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F\uDE80-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD00-\uDDFF\uDE70-\uDED6])/;function containsEmoji(e){return CONTAINS_EMOJI.test(e)}const IS_BASIC_ASCII=/^[\t\n\r\x20-\x7E]*$/;function isBasicASCII(e){return IS_BASIC_ASCII.test(e)}const UNUSUAL_LINE_TERMINATORS=/[\u2028\u2029]/;function containsUnusualLineTerminators(e){return UNUSUAL_LINE_TERMINATORS.test(e)}function containsFullWidthCharacter(e){for(let t=0,r=e.length;t<r;t++)if(isFullWidthCharacter(e.charCodeAt(t)))return!0;return!1}function isFullWidthCharacter(e){return(e=+e)>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function isEmojiImprecise(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129003||e>=129280&&e<=129535||e>=129648&&e<=129750}function lcut(e,t){if(e.length<t)return e;const r=/\b/g;let i=0;for(;r.test(e)&&!(e.length-r.lastIndex<t);)i=r.lastIndex,r.lastIndex+=1;return e.substring(i).replace(/^\s/,"")}const EL=/\x1B\x5B[12]?K/g,COLOR_START=/\x1b\[\d+m/g,COLOR_END=/\x1b\[0?m/g;function removeAnsiEscapeCodes(e){return e&&(e=(e=(e=e.replace(EL,"")).replace(COLOR_START,"")).replace(COLOR_END,"")),e}const UTF8_BOM_CHARACTER=String.fromCharCode(65279);function startsWithUTF8BOM(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}function stripUTF8BOM(e){return startsWithUTF8BOM(e)?e.substr(1):e}function fuzzyContains(e,t){if(!e||!t)return!1;if(e.length<t.length)return!1;const r=t.length,i=e.toLowerCase();let n=0,s=-1;for(;n<r;){const e=i.indexOf(t[n],s+1);if(e<0)return!1;s=e,n++}return!0}function containsUppercaseCharacter(e,t=!1){return!!e&&(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e)}function uppercaseFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function getNLines(e,t=1){if(0===t)return"";let r=-1;do{r=e.indexOf("\n",r+1),t--}while(t>0&&r>=0);return-1===r?e:("\r"===e[r-1]&&r--,e.substr(0,r))}function singleLetterHash(e){return(e%=52)<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}function getGraphemeBreakType(e){return GraphemeBreakTree.getInstance().getGraphemeBreakType(e)}function breakBetweenGraphemeBreakType(e,t){return 0===e?5!==t&&7!==t:(2!==e||3!==t)&&(4===e||2===e||3===e||(4===t||2===t||3===t||(8!==e||8!==t&&9!==t&&11!==t&&12!==t)&&((11!==e&&9!==e||9!==t&&10!==t)&&((12!==e&&10!==e||10!==t)&&(5!==t&&13!==t&&(7!==t&&(1!==e&&((13!==e||14!==t)&&(6!==e||6!==t)))))))))}var GraphemeBreakType,CodePoint;!function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"}(GraphemeBreakType||(GraphemeBreakType={}));class GraphemeBreakTree{constructor(){this._data=getGraphemeBreakRawData()}static getInstance(){return GraphemeBreakTree._INSTANCE||(GraphemeBreakTree._INSTANCE=new GraphemeBreakTree),GraphemeBreakTree._INSTANCE}getGraphemeBreakType(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;const t=this._data,r=t.length/3;let i=1;for(;i<=r;)if(e<t[3*i])i*=2;else{if(!(e>t[3*i+1]))return t[3*i+2];i=2*i+1}return 0}}function getGraphemeBreakRawData(){return JSON.parse("[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]")}function getLeftDeleteOffset(e,t){if(0===e)return 0;const r=getOffsetBeforeLastEmojiComponent(e,t);if(void 0!==r)return r;return e-=getUTF16Length(getPrevCodePoint(t,e))}function getOffsetBeforeLastEmojiComponent(e,t){let r=getPrevCodePoint(t,e);for(e-=getUTF16Length(r);isEmojiModifier(r)||65039===r||8419===r;){if(0===e)return;r=getPrevCodePoint(t,e),e-=getUTF16Length(r)}if(isEmojiImprecise(r)){if(e>=0){const r=getPrevCodePoint(t,e);8205===r&&(e-=getUTF16Length(r))}return e}}function getUTF16Length(e){return e>=65536?2:1}function isEmojiModifier(e){return 127995<=e&&e<=127999}GraphemeBreakTree._INSTANCE=null,function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap"}(CodePoint||(CodePoint={}));var strings=Object.freeze({__proto__:null,isFalsyOrWhitespace:isFalsyOrWhitespace,format:format$1,format2:format2,escape:escape,escapeRegExpCharacters:escapeRegExpCharacters,count:count,truncate:truncate,trim:trim,ltrim:ltrim,rtrim:rtrim,convertSimple2RegExpPattern:convertSimple2RegExpPattern,stripWildcards:stripWildcards,createRegExp:createRegExp,regExpLeadsToEndlessLoop:regExpLeadsToEndlessLoop,regExpContainsBackreference:regExpContainsBackreference,regExpFlags:regExpFlags,splitLines:splitLines,firstNonWhitespaceIndex:firstNonWhitespaceIndex,getLeadingWhitespace:getLeadingWhitespace,lastNonWhitespaceIndex:lastNonWhitespaceIndex,compare:compare,compareSubstring:compareSubstring,compareIgnoreCase:compareIgnoreCase,compareSubstringIgnoreCase:compareSubstringIgnoreCase,isLowerAsciiLetter:isLowerAsciiLetter,isUpperAsciiLetter:isUpperAsciiLetter,equalsIgnoreCase:equalsIgnoreCase,startsWithIgnoreCase:startsWithIgnoreCase,commonPrefixLength:commonPrefixLength,commonSuffixLength:commonSuffixLength,isHighSurrogate:isHighSurrogate,isLowSurrogate:isLowSurrogate,computeCodePoint:computeCodePoint,getNextCodePoint:getNextCodePoint,nextCharLength:nextCharLength,prevCharLength:prevCharLength,getCharContainingOffset:getCharContainingOffset,encodeUTF8:encodeUTF8,decodeUTF8:decodeUTF8,containsRTL:containsRTL,containsEmoji:containsEmoji,isBasicASCII:isBasicASCII,UNUSUAL_LINE_TERMINATORS:UNUSUAL_LINE_TERMINATORS,containsUnusualLineTerminators:containsUnusualLineTerminators,containsFullWidthCharacter:containsFullWidthCharacter,isFullWidthCharacter:isFullWidthCharacter,isEmojiImprecise:isEmojiImprecise,lcut:lcut,removeAnsiEscapeCodes:removeAnsiEscapeCodes,UTF8_BOM_CHARACTER:UTF8_BOM_CHARACTER,startsWithUTF8BOM:startsWithUTF8BOM,stripUTF8BOM:stripUTF8BOM,fuzzyContains:fuzzyContains,containsUppercaseCharacter:containsUppercaseCharacter,uppercaseFirstLetter:uppercaseFirstLetter,getNLines:getNLines,singleLetterHash:singleLetterHash,getGraphemeBreakType:getGraphemeBreakType,breakBetweenGraphemeBreakType:breakBetweenGraphemeBreakType,get GraphemeBreakType(){return GraphemeBreakType},getLeftDeleteOffset:getLeftDeleteOffset});let safeProcess;if(void 0!==globals.vscode&&void 0!==globals.vscode.process){const e=globals.vscode.process;safeProcess={get platform(){return e.platform},get env(){return e.env},cwd:()=>e.cwd(),nextTick:e=>setImmediate(e)}}else safeProcess="undefined"!=typeof process?{get platform(){return process.platform},get env(){return process.env},cwd:()=>process.env.VSCODE_CWD||process.cwd(),nextTick:e=>process.nextTick(e)}:{get platform(){return isWindows?"win32":isMacintosh?"darwin":"linux"},nextTick:e=>setImmediate(e),get env(){return{}},cwd:()=>"/"};const cwd=safeProcess.cwd,env=safeProcess.env,platform=safeProcess.platform,nextTick=safeProcess.nextTick;var process$1=Object.freeze({__proto__:null,cwd:cwd,env:env,platform:platform,nextTick:nextTick});const CHAR_UPPERCASE_A=65,CHAR_LOWERCASE_A=97,CHAR_UPPERCASE_Z=90,CHAR_LOWERCASE_Z=122,CHAR_DOT=46,CHAR_FORWARD_SLASH=47,CHAR_BACKWARD_SLASH=92,CHAR_COLON=58,CHAR_QUESTION_MARK=63;class ErrorInvalidArgType extends Error{constructor(e,t,r){let i;"string"==typeof t&&0===t.indexOf("not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";const n=-1!==e.indexOf(".")?"property":"argument";let s=`The "${e}" ${n} ${i} of type ${t}`;s+=". Received type "+typeof r,super(s),this.code="ERR_INVALID_ARG_TYPE"}}function validateString(e,t){if("string"!=typeof e)throw new ErrorInvalidArgType(t,"string",e)}function isPathSeparator$1(e){return 47===e||92===e}function isPosixPathSeparator(e){return 47===e}function isWindowsDeviceRoot(e){return e>=65&&e<=90||e>=97&&e<=122}function normalizeString(e,t,r,i){let n="",s=0,o=-1,a=0,l=0;for(let c=0;c<=e.length;++c){if(c<e.length)l=e.charCodeAt(c);else{if(i(l))break;l=47}if(i(l)){if(o===c-1||1===a);else if(2===a){if(n.length<2||2!==s||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2)){if(n.length>2){const e=n.lastIndexOf(r);-1===e?(n="",s=0):(n=n.slice(0,e),s=n.length-1-n.lastIndexOf(r)),o=c,a=0;continue}if(0!==n.length){n="",s=0,o=c,a=0;continue}}t&&(n+=n.length>0?r+"..":"..",s=2)}else n.length>0?n+=`${r}${e.slice(o+1,c)}`:n=e.slice(o+1,c),s=c-o-1;o=c,a=0}else 46===l&&-1!==a?++a:a=-1}return n}function _format(e,t){if(null===t||"object"!=typeof t)throw new ErrorInvalidArgType("pathObject","Object",t);const r=t.dir||t.root,i=t.base||`${t.name||""}${t.ext||""}`;return r?r===t.root?`${r}${i}`:`${r}${e}${i}`:i}const win32={resolve(...e){let t="",r="",i=!1;for(let n=e.length-1;n>=-1;n--){let s;if(n>=0){if(s=e[n],validateString(s,"path"),0===s.length)continue}else 0===t.length?s=cwd():(s=env["="+t]||cwd(),(void 0===s||s.slice(0,2).toLowerCase()!==t.toLowerCase()&&92===s.charCodeAt(2))&&(s=t+"\\"));const o=s.length;let a=0,l="",c=!1;const h=s.charCodeAt(0);if(1===o)isPathSeparator$1(h)&&(a=1,c=!0);else if(isPathSeparator$1(h))if(c=!0,isPathSeparator$1(s.charCodeAt(1))){let e=2,t=e;for(;e<o&&!isPathSeparator$1(s.charCodeAt(e));)e++;if(e<o&&e!==t){const r=s.slice(t,e);for(t=e;e<o&&isPathSeparator$1(s.charCodeAt(e));)e++;if(e<o&&e!==t){for(t=e;e<o&&!isPathSeparator$1(s.charCodeAt(e));)e++;e!==o&&e===t||(l=`\\\\${r}\\${s.slice(t,e)}`,a=e)}}}else a=1;else isWindowsDeviceRoot(h)&&58===s.charCodeAt(1)&&(l=s.slice(0,2),a=2,o>2&&isPathSeparator$1(s.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(t.length>0){if(l.toLowerCase()!==t.toLowerCase())continue}else t=l;if(i){if(t.length>0)break}else if(r=`${s.slice(a)}\\${r}`,i=c,c&&t.length>0)break}return r=normalizeString(r,!i,"\\",isPathSeparator$1),i?`${t}\\${r}`:`${t}${r}`||"."},normalize(e){validateString(e,"path");const t=e.length;if(0===t)return".";let r,i=0,n=!1;const s=e.charCodeAt(0);if(1===t)return isPosixPathSeparator(s)?"\\":e;if(isPathSeparator$1(s))if(n=!0,isPathSeparator$1(e.charCodeAt(1))){let n=2,s=n;for(;n<t&&!isPathSeparator$1(e.charCodeAt(n));)n++;if(n<t&&n!==s){const o=e.slice(s,n);for(s=n;n<t&&isPathSeparator$1(e.charCodeAt(n));)n++;if(n<t&&n!==s){for(s=n;n<t&&!isPathSeparator$1(e.charCodeAt(n));)n++;if(n===t)return`\\\\${o}\\${e.slice(s)}\\`;n!==s&&(r=`\\\\${o}\\${e.slice(s,n)}`,i=n)}}}else i=1;else isWindowsDeviceRoot(s)&&58===e.charCodeAt(1)&&(r=e.slice(0,2),i=2,t>2&&isPathSeparator$1(e.charCodeAt(2))&&(n=!0,i=3));let o=i<t?normalizeString(e.slice(i),!n,"\\",isPathSeparator$1):"";return 0!==o.length||n||(o="."),o.length>0&&isPathSeparator$1(e.charCodeAt(t-1))&&(o+="\\"),void 0===r?n?"\\"+o:o:n?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){validateString(e,"path");const t=e.length;if(0===t)return!1;const r=e.charCodeAt(0);return isPathSeparator$1(r)||t>2&&isWindowsDeviceRoot(r)&&58===e.charCodeAt(1)&&isPathSeparator$1(e.charCodeAt(2))},join(...e){if(0===e.length)return".";let t,r;for(let i=0;i<e.length;++i){const n=e[i];validateString(n,"path"),n.length>0&&(void 0===t?t=r=n:t+="\\"+n)}if(void 0===t)return".";let i=!0,n=0;if("string"==typeof r&&isPathSeparator$1(r.charCodeAt(0))){++n;const e=r.length;e>1&&isPathSeparator$1(r.charCodeAt(1))&&(++n,e>2&&(isPathSeparator$1(r.charCodeAt(2))?++n:i=!1))}if(i){for(;n<t.length&&isPathSeparator$1(t.charCodeAt(n));)n++;n>=2&&(t="\\"+t.slice(n))}return win32.normalize(t)},relative(e,t){if(validateString(e,"from"),validateString(t,"to"),e===t)return"";const r=win32.resolve(e),i=win32.resolve(t);if(r===i)return"";if((e=r.toLowerCase())===(t=i.toLowerCase()))return"";let n=0;for(;n<e.length&&92===e.charCodeAt(n);)n++;let s=e.length;for(;s-1>n&&92===e.charCodeAt(s-1);)s--;const o=s-n;let a=0;for(;a<t.length&&92===t.charCodeAt(a);)a++;let l=t.length;for(;l-1>a&&92===t.charCodeAt(l-1);)l--;const c=l-a,h=o<c?o:c;let u=-1,_=0;for(;_<h;_++){const r=e.charCodeAt(n+_);if(r!==t.charCodeAt(a+_))break;92===r&&(u=_)}if(_!==h){if(-1===u)return i}else{if(c>h){if(92===t.charCodeAt(a+_))return i.slice(a+_+1);if(2===_)return i.slice(a+_)}o>h&&(92===e.charCodeAt(n+_)?u=_:2===_&&(u=3)),-1===u&&(u=0)}let d="";for(_=n+u+1;_<=s;++_)_!==s&&92!==e.charCodeAt(_)||(d+=0===d.length?"..":"\\..");return a+=u,d.length>0?`${d}${i.slice(a,l)}`:(92===i.charCodeAt(a)&&++a,i.slice(a,l))},toNamespacedPath(e){if("string"!=typeof e)return e;if(0===e.length)return"";const t=win32.resolve(e);if(t.length<=2)return e;if(92===t.charCodeAt(0)){if(92===t.charCodeAt(1)){const e=t.charCodeAt(2);if(63!==e&&46!==e)return"\\\\?\\UNC\\"+t.slice(2)}}else if(isWindowsDeviceRoot(t.charCodeAt(0))&&58===t.charCodeAt(1)&&92===t.charCodeAt(2))return"\\\\?\\"+t;return e},dirname(e){validateString(e,"path");const t=e.length;if(0===t)return".";let r=-1,i=0;const n=e.charCodeAt(0);if(1===t)return isPathSeparator$1(n)?e:".";if(isPathSeparator$1(n)){if(r=i=1,isPathSeparator$1(e.charCodeAt(1))){let n=2,s=n;for(;n<t&&!isPathSeparator$1(e.charCodeAt(n));)n++;if(n<t&&n!==s){for(s=n;n<t&&isPathSeparator$1(e.charCodeAt(n));)n++;if(n<t&&n!==s){for(s=n;n<t&&!isPathSeparator$1(e.charCodeAt(n));)n++;if(n===t)return e;n!==s&&(r=i=n+1)}}}}else isWindowsDeviceRoot(n)&&58===e.charCodeAt(1)&&(r=t>2&&isPathSeparator$1(e.charCodeAt(2))?3:2,i=r);let s=-1,o=!0;for(let r=t-1;r>=i;--r)if(isPathSeparator$1(e.charCodeAt(r))){if(!o){s=r;break}}else o=!1;if(-1===s){if(-1===r)return".";s=r}return e.slice(0,s)},basename(e,t){void 0!==t&&validateString(t,"ext"),validateString(e,"path");let r,i=0,n=-1,s=!0;if(e.length>=2&&isWindowsDeviceRoot(e.charCodeAt(0))&&58===e.charCodeAt(1)&&(i=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(r=e.length-1;r>=i;--r){const l=e.charCodeAt(r);if(isPathSeparator$1(l)){if(!s){i=r+1;break}}else-1===a&&(s=!1,a=r+1),o>=0&&(l===t.charCodeAt(o)?-1==--o&&(n=r):(o=-1,n=a))}return i===n?n=a:-1===n&&(n=e.length),e.slice(i,n)}for(r=e.length-1;r>=i;--r)if(isPathSeparator$1(e.charCodeAt(r))){if(!s){i=r+1;break}}else-1===n&&(s=!1,n=r+1);return-1===n?"":e.slice(i,n)},extname(e){validateString(e,"path");let t=0,r=-1,i=0,n=-1,s=!0,o=0;e.length>=2&&58===e.charCodeAt(1)&&isWindowsDeviceRoot(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const t=e.charCodeAt(a);if(isPathSeparator$1(t)){if(!s){i=a+1;break}}else-1===n&&(s=!1,n=a+1),46===t?-1===r?r=a:1!==o&&(o=1):-1!==r&&(o=-1)}return-1===r||-1===n||0===o||1===o&&r===n-1&&r===i+1?"":e.slice(r,n)},format:_format.bind(null,"\\"),parse(e){validateString(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const r=e.length;let i=0,n=e.charCodeAt(0);if(1===r)return isPathSeparator$1(n)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(isPathSeparator$1(n)){if(i=1,isPathSeparator$1(e.charCodeAt(1))){let t=2,n=t;for(;t<r&&!isPathSeparator$1(e.charCodeAt(t));)t++;if(t<r&&t!==n){for(n=t;t<r&&isPathSeparator$1(e.charCodeAt(t));)t++;if(t<r&&t!==n){for(n=t;t<r&&!isPathSeparator$1(e.charCodeAt(t));)t++;t===r?i=t:t!==n&&(i=t+1)}}}}else if(isWindowsDeviceRoot(n)&&58===e.charCodeAt(1)){if(r<=2)return t.root=t.dir=e,t;if(i=2,isPathSeparator$1(e.charCodeAt(2))){if(3===r)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let s=-1,o=i,a=-1,l=!0,c=e.length-1,h=0;for(;c>=i;--c)if(n=e.charCodeAt(c),isPathSeparator$1(n)){if(!l){o=c+1;break}}else-1===a&&(l=!1,a=c+1),46===n?-1===s?s=c:1!==h&&(h=1):-1!==s&&(h=-1);return-1!==a&&(-1===s||0===h||1===h&&s===a-1&&s===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,s),t.base=e.slice(o,a),t.ext=e.slice(s,a))),t.dir=o>0&&o!==i?e.slice(0,o-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},posix={resolve(...e){let t="",r=!1;for(let i=e.length-1;i>=-1&&!r;i--){const n=i>=0?e[i]:cwd();validateString(n,"path"),0!==n.length&&(t=`${n}/${t}`,r=47===n.charCodeAt(0))}return t=normalizeString(t,!r,"/",isPosixPathSeparator),r?"/"+t:t.length>0?t:"."},normalize(e){if(validateString(e,"path"),0===e.length)return".";const t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0===(e=normalizeString(e,!t,"/",isPosixPathSeparator)).length?t?"/":r?"./":".":(r&&(e+="/"),t?"/"+e:e)},isAbsolute:e=>(validateString(e,"path"),e.length>0&&47===e.charCodeAt(0)),join(...e){if(0===e.length)return".";let t;for(let r=0;r<e.length;++r){const i=e[r];validateString(i,"path"),i.length>0&&(void 0===t?t=i:t+="/"+i)}return void 0===t?".":posix.normalize(t)},relative(e,t){if(validateString(e,"from"),validateString(t,"to"),e===t)return"";if((e=posix.resolve(e))===(t=posix.resolve(t)))return"";const r=e.length,i=r-1,n=t.length-1,s=i<n?i:n;let o=-1,a=0;for(;a<s;a++){const r=e.charCodeAt(1+a);if(r!==t.charCodeAt(1+a))break;47===r&&(o=a)}if(a===s)if(n>s){if(47===t.charCodeAt(1+a))return t.slice(1+a+1);if(0===a)return t.slice(1+a)}else i>s&&(47===e.charCodeAt(1+a)?o=a:0===a&&(o=0));let l="";for(a=1+o+1;a<=r;++a)a!==r&&47!==e.charCodeAt(a)||(l+=0===l.length?"..":"/..");return`${l}${t.slice(1+o)}`},toNamespacedPath:e=>e,dirname(e){if(validateString(e,"path"),0===e.length)return".";const t=47===e.charCodeAt(0);let r=-1,i=!0;for(let t=e.length-1;t>=1;--t)if(47===e.charCodeAt(t)){if(!i){r=t;break}}else i=!1;return-1===r?t?"/":".":t&&1===r?"//":e.slice(0,r)},basename(e,t){void 0!==t&&validateString(t,"ext"),validateString(e,"path");let r,i=0,n=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(r=e.length-1;r>=0;--r){const l=e.charCodeAt(r);if(47===l){if(!s){i=r+1;break}}else-1===a&&(s=!1,a=r+1),o>=0&&(l===t.charCodeAt(o)?-1==--o&&(n=r):(o=-1,n=a))}return i===n?n=a:-1===n&&(n=e.length),e.slice(i,n)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){i=r+1;break}}else-1===n&&(s=!1,n=r+1);return-1===n?"":e.slice(i,n)},extname(e){validateString(e,"path");let t=-1,r=0,i=-1,n=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(47!==a)-1===i&&(n=!1,i=o+1),46===a?-1===t?t=o:1!==s&&(s=1):-1!==t&&(s=-1);else if(!n){r=o+1;break}}return-1===t||-1===i||0===s||1===s&&t===i-1&&t===r+1?"":e.slice(t,i)},format:_format.bind(null,"/"),parse(e){validateString(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const r=47===e.charCodeAt(0);let i;r?(t.root="/",i=1):i=0;let n=-1,s=0,o=-1,a=!0,l=e.length-1,c=0;for(;l>=i;--l){const t=e.charCodeAt(l);if(47!==t)-1===o&&(a=!1,o=l+1),46===t?-1===n?n=l:1!==c&&(c=1):-1!==n&&(c=-1);else if(!a){s=l+1;break}}if(-1!==o){const i=0===s&&r?1:s;-1===n||0===c||1===c&&n===o-1&&n===s+1?t.base=t.name=e.slice(i,o):(t.name=e.slice(i,n),t.base=e.slice(i,o),t.ext=e.slice(n,o))}return s>0?t.dir=e.slice(0,s-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};posix.win32=win32.win32=win32,posix.posix=win32.posix=posix;const normalize="win32"===platform?win32.normalize:posix.normalize,isAbsolute="win32"===platform?win32.isAbsolute:posix.isAbsolute,join="win32"===platform?win32.join:posix.join,resolve="win32"===platform?win32.resolve:posix.resolve,relative="win32"===platform?win32.relative:posix.relative,dirname$1="win32"===platform?win32.dirname:posix.dirname,basename$1="win32"===platform?win32.basename:posix.basename,extname$1="win32"===platform?win32.extname:posix.extname,format="win32"===platform?win32.format:posix.format,parse$1="win32"===platform?win32.parse:posix.parse,toNamespacedPath="win32"===platform?win32.toNamespacedPath:posix.toNamespacedPath,sep="win32"===platform?win32.sep:posix.sep,delimiter="win32"===platform?win32.delimiter:posix.delimiter;function isArray(e){return Array.isArray(e)}function isString(e){return"string"==typeof e}function isStringArray(e){return Array.isArray(e)&&e.every(e=>isString(e))}function isObject(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function isNumber(e){return"number"==typeof e&&!isNaN(e)}function isIterable(e){return!!e&&"function"==typeof e[Symbol.iterator]}function isBoolean(e){return!0===e||!1===e}function isUndefined(e){return void 0===e}function isDefined(e){return!isUndefinedOrNull(e)}function isUndefinedOrNull(e){return isUndefined(e)||null===e}function assertType(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function assertIsDefined(e){if(isUndefinedOrNull(e))throw new Error("Assertion Failed: argument is undefined or null");return e}function assertAllDefined(...e){const t=[];for(let r=0;r<e.length;r++){const i=e[r];if(isUndefinedOrNull(i))throw new Error(`Assertion Failed: argument at index ${r} is undefined or null`);t.push(i)}return t}const hasOwnProperty=Object.prototype.hasOwnProperty;function isEmptyObject(e){if(!isObject(e))return!1;for(let t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function isFunction(e){return"function"==typeof e}function areFunctions(...e){return e.length>0&&e.every(isFunction)}function validateConstraints(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++)validateConstraint(e[i],t[i])}function validateConstraint(e,t){if(isString(t)){if(typeof e!==t)throw new Error("argument does not match constraint: typeof "+t)}else if(isFunction(t)){try{if(e instanceof t)return}catch(e){}if(!isUndefinedOrNull(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function getAllPropertyNames(e){let t=[],r=Object.getPrototypeOf(e);for(;Object.prototype!==r;)t=t.concat(Object.getOwnPropertyNames(r)),r=Object.getPrototypeOf(r);return t}function getAllMethodNames(e){const t=[];for(const r of getAllPropertyNames(e))"function"==typeof e[r]&&t.push(r);return t}function createProxyObject(e,t){const r=e=>function(){const r=Array.prototype.slice.call(arguments,0);return t(e,r)};let i={};for(const t of e)i[t]=r(t);return i}function withNullAsUndefined(e){return null===e?void 0:e}function withUndefinedAsNull(e){return void 0===e?null:e}function NotImplementedProxy(e){return class{constructor(){return new Proxy({},{get(t,r){if(t[r])return t[r];throw new Error(`Not Implemented: ${e}->${String(r)}`)}})}}}function assertNever(e,t="Unreachable"){throw new Error(t)}function isPathSeparator(e){return 47===e||92===e}function toSlashes(e){return e.replace(/[\\/]/g,posix.sep)}function toPosixPath(e){return-1===e.indexOf("/")&&(e=toSlashes(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function getRoot(e,t=posix.sep){if(!e)return"";const r=e.length,i=e.charCodeAt(0);if(isPathSeparator(i)){if(isPathSeparator(e.charCodeAt(1))&&!isPathSeparator(e.charCodeAt(2))){let i=3;const n=i;for(;i<r&&!isPathSeparator(e.charCodeAt(i));i++);if(n!==i&&!isPathSeparator(e.charCodeAt(i+1)))for(i+=1;i<r;i++)if(isPathSeparator(e.charCodeAt(i)))return e.slice(0,i+1).replace(/[\\/]/g,t)}return t}if(isWindowsDriveLetter(i)&&58===e.charCodeAt(1))return isPathSeparator(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let n=e.indexOf("://");if(-1!==n)for(n+=3;n<r;n++)if(isPathSeparator(e.charCodeAt(n)))return e.slice(0,n+1);return""}function isUNC(e){if(!isWindows)return!1;if(!e||e.length<5)return!1;let t=e.charCodeAt(0);if(92!==t)return!1;if(t=e.charCodeAt(1),92!==t)return!1;let r=2;const i=r;for(;r<e.length&&(t=e.charCodeAt(r),92!==t);r++);return i!==r&&(t=e.charCodeAt(r+1),!isNaN(t)&&92!==t)}const WINDOWS_INVALID_FILE_CHARS=/[\\/:\*\?"<>\|]/g,UNIX_INVALID_FILE_CHARS=/[\\/]/g,WINDOWS_FORBIDDEN_NAMES=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function isValidBasename(e,t=isWindows){const r=t?WINDOWS_INVALID_FILE_CHARS:UNIX_INVALID_FILE_CHARS;return!(!e||0===e.length||/^\s+$/.test(e))&&(r.lastIndex=0,!r.test(e)&&((!t||!WINDOWS_FORBIDDEN_NAMES.test(e))&&("."!==e&&".."!==e&&((!t||"."!==e[e.length-1])&&((!t||e.length===e.trim().length)&&!(e.length>255))))))}function isEqual$1(e,t,r){const i=e===t;return!r||i?i:!(!e||!t)&&equalsIgnoreCase(e,t)}function isEqualOrParent$1(e,t,r,i=sep){if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(r){if(!startsWithIgnoreCase(e,t))return!1;if(t.length===e.length)return!0;let r=t.length;return t.charAt(t.length-1)===i&&r--,e.charAt(r)===i}return t.charAt(t.length-1)!==i&&(t+=i),0===e.indexOf(t)}function isWindowsDriveLetter(e){return e>=65&&e<=90||e>=97&&e<=122}function sanitizeFilePath(e,t){return isWindows&&e.endsWith(":")&&(e+=sep),isAbsolute(e)||(e=join(t,e)),e=normalize(e),isWindows?(e=rtrim(e,sep)).endsWith(":")&&(e+=sep):(e=rtrim(e,sep))||(e=sep),e}function isRootOrDriveLetter(e){const t=normalize(e);return isWindows?!(e.length>3)&&(hasDriveLetter(t)&&(2===e.length||92===t.charCodeAt(2))):t===posix.sep}function hasDriveLetter(e){return!!isWindows&&(isWindowsDriveLetter(e.charCodeAt(0))&&58===e.charCodeAt(1))}function getDriveLetter(e){return hasDriveLetter(e)?e[0]:void 0}function indexOfPath(e,t,r){return t.length>e.length?-1:e===t?0:(r&&(e=e.toLowerCase(),t=t.toLowerCase()),e.indexOf(t))}function parseLineAndColumnAware(e){const t=e.split(":");let r=void 0,i=void 0,n=void 0;if(t.forEach(e=>{const t=Number(e);isNumber(t)?void 0===i?i=t:void 0===n&&(n=t):r=r?[r,e].join(":"):e}),!r)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:r,line:void 0!==i?i:void 0,column:void 0!==n?n:void 0!==i?1:void 0}}const _schemePattern=/^\w[\w\d+.-]*$/,_singleSlashStart=/^\//,_doubleSlashStart=/^\/\//;function _validateUri(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!_schemePattern.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!_singleSlashStart.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(_doubleSlashStart.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}function _schemeFix(e,t){return e||t?e:"file"}function _referenceResolution(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==_slash&&(t=_slash+t):t=_slash}return t}const _empty="",_slash="/",_regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class URI{constructor(e,t,r,i,n,s=!1){"object"==typeof e?(this.scheme=e.scheme||"",this.authority=e.authority||"",this.path=e.path||"",this.query=e.query||"",this.fragment=e.fragment||""):(this.scheme=_schemeFix(e,s),this.authority=t||"",this.path=_referenceResolution(this.scheme,r||""),this.query=i||"",this.fragment=n||"",_validateUri(this,s))}static isUri(e){return e instanceof URI||!!e&&("string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString)}get fsPath(){return uriToFsPath(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:r,path:i,query:n,fragment:s}=e;return void 0===t?t=this.scheme:null===t&&(t=""),void 0===r?r=this.authority:null===r&&(r=""),void 0===i?i=this.path:null===i&&(i=""),void 0===n?n=this.query:null===n&&(n=""),void 0===s?s=this.fragment:null===s&&(s=""),t===this.scheme&&r===this.authority&&i===this.path&&n===this.query&&s===this.fragment?this:new Uri(t,r,i,n,s)}static parse(e,t=!1){const r=_regexp.exec(e);return r?new Uri(r[2]||"",percentDecode(r[4]||""),percentDecode(r[5]||""),percentDecode(r[7]||""),percentDecode(r[9]||""),t):new Uri("","","","","")}static file(e){let t="";if(isWindows&&(e=e.replace(/\\/g,_slash)),e[0]===_slash&&e[1]===_slash){const r=e.indexOf(_slash,2);-1===r?(t=e.substring(2),e=_slash):(t=e.substring(2,r),e=e.substring(r)||_slash)}return new Uri("file",t,e,"","")}static from(e){const t=new Uri(e.scheme,e.authority,e.path,e.query,e.fragment);return _validateUri(t,!0),t}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return r=isWindows&&"file"===e.scheme?URI.file(win32.join(uriToFsPath(e,!0),...t)).path:posix.join(e.path,...t),e.with({path:r})}static appendParams(e,t){const r=URI.parse(e);let i;return console.log(r.query,typeof URLSearchParams),i="undefined"!=typeof URLSearchParams?this._appendParamsInBrowser(r,t):this._appendParamsInCommon(r,t),r.with({query:i}).toString()}static _appendParamsInBrowser(e,t){const r=new URLSearchParams(e.query);if("object"!=typeof t)return`${r.toString()}${t}`;for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.append(e,t[e]);return r.toString()}static _appendParamsInCommon(e,t){const r=[];if("object"==typeof t)for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(`${encodeURIComponentFast(e,!0)}=${encodeURIComponentFast(t[e],!0)}`);return`${e.query}&${r.join("&")}`}toString(e=!1){return _asFormatted(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof URI)return e;{const t=new Uri(e);return t._formatted=e.external,t._fsPath=e._sep===_pathSepMarker?e.fsPath:null,t}}return e}}const _pathSepMarker=isWindows?1:void 0;class Uri extends URI{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=uriToFsPath(this,!1)),this._fsPath}toString(e=!1){return e?_asFormatted(this,!0):(this._formatted||(this._formatted=_asFormatted(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=_pathSepMarker),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const encodeTable={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function encodeURIComponentFast(e,t){let r=void 0,i=-1;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||45===s||46===s||95===s||126===s||t&&47===s)-1!==i&&(r+=encodeURIComponent(e.substring(i,n)),i=-1),void 0!==r&&(r+=e.charAt(n));else{void 0===r&&(r=e.substr(0,n));const t=encodeTable[s];void 0!==t?(-1!==i&&(r+=encodeURIComponent(e.substring(i,n)),i=-1),r+=t):-1===i&&(i=n)}}return-1!==i&&(r+=encodeURIComponent(e.substring(i))),void 0!==r?r:e}function encodeURIComponentMinimal(e){let t=void 0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);35===i||63===i?(void 0===t&&(t=e.substr(0,r)),t+=encodeTable[i]):void 0!==t&&(t+=e[r])}return void 0!==t?t:e}function uriToFsPath(e,t){let r;return r=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,isWindows&&(r=r.replace(/\//g,"\\")),r}function _asFormatted(e,t){const r=t?encodeURIComponentMinimal:encodeURIComponentFast;let i="",{scheme:n,authority:s,path:o,query:a,fragment:l}=e;if(n&&(i+=n,i+=":"),(s||"file"===n)&&(i+=_slash,i+=_slash),s){let e=s.indexOf("@");if(-1!==e){const t=s.substr(0,e);s=s.substr(e+1),e=t.indexOf(":"),-1===e?i+=r(t,!1):(i+=r(t.substr(0,e),!1),i+=":",i+=r(t.substr(e+1),!1)),i+="@"}s=s.toLowerCase(),e=s.indexOf(":"),-1===e?i+=r(s,!1):(i+=r(s.substr(0,e),!1),i+=s.substr(e))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2)){const e=o.charCodeAt(1);e>=65&&e<=90&&(o=`/${String.fromCharCode(e+32)}:${o.substr(3)}`)}else if(o.length>=2&&58===o.charCodeAt(1)){const e=o.charCodeAt(0);e>=65&&e<=90&&(o=`${String.fromCharCode(e+32)}:${o.substr(2)}`)}i+=r(o,!0)}return a&&(i+="?",i+=r(a,!1)),l&&(i+="#",i+=t?l:encodeURIComponentFast(l,!1)),i}function decodeURIComponentGraceful(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+decodeURIComponentGraceful(e.substr(3)):e}}const _rEncodedAsHex=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function percentDecode(e){return e.match(_rEncodedAsHex)?e.replace(_rEncodedAsHex,e=>decodeURIComponentGraceful(e)):e}exports.Schemas=void 0,function(e){e.inMemory="inmemory",e.qqmusic="qqmusic",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.qqmusicRemote="qqmusic-remote",e.qqmusicRemoteResource="qqmusic-remote-resource",e.userData="qqmusic-userdata",e.qqmusicSettings="qqmusic-settings",e.qqmusicTerminal="qqmusic-terminal",e.webviewPanel="webview-panel",e.qqmusicWebview="qqmusic-webview",e.extension="extension",e.qqmusicFileResource="qqmusic-file",e.tmp="tmp"}(exports.Schemas||(exports.Schemas={}));class RemoteAuthoritiesImpl{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}set(e,t,r){this._hosts[e]=t,this._ports[e]=r}setConnectionToken(e,t){this._connectionTokens[e]=t}rewrite(e){if(this._delegate)return this._delegate(e);const t=e.authority;let r=this._hosts[t];r&&-1!==r.indexOf(":")&&(r=`[${r}]`);const i=this._ports[t],n=this._connectionTokens[t];let s="path="+encodeURIComponent(e.path);return"string"==typeof n&&(s+="&tkn="+encodeURIComponent(n)),URI.from({scheme:isWeb?this._preferredWebSchema:exports.Schemas.qqmusicRemoteResource,authority:`${r}:${i}`,path:"/qqmusic-remote-resource",query:s})}}const RemoteAuthorities=new RemoteAuthoritiesImpl;class FileAccessImpl{constructor(){this.FALLBACK_AUTHORITY="qqmusic-app"}asBrowserUri(e,t,r){const i=this.toUri(e,t);if(i.scheme===exports.Schemas.qqmusicRemote)return RemoteAuthorities.rewrite(i);let n=!1;return isNative&&r&&i.scheme===exports.Schemas.file&&(n=!0),i.scheme===exports.Schemas.file&&"function"==typeof globals.importScripts&&"qqmusic-file://qqmusic-app"===globals.origin&&(n=!0),n?i.with({scheme:exports.Schemas.qqmusicFileResource,authority:i.authority||this.FALLBACK_AUTHORITY,query:null,fragment:null}):i}asFileUri(e,t){const r=this.toUri(e,t);return r.scheme===exports.Schemas.qqmusicFileResource?r.with({scheme:exports.Schemas.file,authority:r.authority!==this.FALLBACK_AUTHORITY?r.authority:null,query:null,fragment:null}):r}toUri(e,t){return URI.isUri(e)?e:URI.parse(t.toUrl(e))}}const FileAccess=new FileAccessImpl;function originalFSPath(e){return uriToFsPath(e,!0)}class ExtUri{constructor(e){this._ignorePathCasing=e}compare(e,t,r=!1){return e===t?0:compare(this.getComparisonKey(e,r),this.getComparisonKey(t,r))}isEqual(e,t,r=!1){return e===t||!(!e||!t)&&this.getComparisonKey(e,r)===this.getComparisonKey(t,r)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,r=!1){if(e.scheme===t.scheme){if(e.scheme===exports.Schemas.file)return isEqualOrParent$1(originalFSPath(e),originalFSPath(t),this._ignorePathCasing(e))&&e.query===t.query&&(r||e.fragment===t.fragment);if(isEqualAuthority(e.authority,t.authority))return isEqualOrParent$1(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(r||e.fragment===t.fragment)}return!1}joinPath(e,...t){return URI.joinPath(e,...t)}basenameOrAuthority(e){return basename(e)||e.authority}basename(e){return posix.basename(e.path)}extname(e){return posix.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===exports.Schemas.file?t=URI.file(dirname$1(originalFSPath(e))).path:(t=posix.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===exports.Schemas.file?URI.file(normalize(originalFSPath(e))).path:posix.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!isEqualAuthority(e.authority,t.authority))return;if(e.scheme===exports.Schemas.file){const r=relative(originalFSPath(e),originalFSPath(t));return isWindows?toSlashes(r):r}let r=e.path||"/",i=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(r.length,i.length);e<t&&(r.charCodeAt(e)===i.charCodeAt(e)||r.charAt(e).toLowerCase()===i.charAt(e).toLowerCase());e++);r=i.substr(0,e)+r.substr(e)}return posix.relative(r,i)}resolvePath(e,t){if(e.scheme===exports.Schemas.file){const r=URI.file(resolve(originalFSPath(e),t));return e.with({authority:r.authority,path:r.path})}return t=toPosixPath(t),e.with({path:posix.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||equalsIgnoreCase(e,t)}hasTrailingPathSeparator(e,t=sep){if(e.scheme===exports.Schemas.file){const r=originalFSPath(e);return r.length>getRoot(r).length&&r[r.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=sep){return hasTrailingPathSeparator(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=sep){let r=!1;if(e.scheme===exports.Schemas.file){const i=originalFSPath(e);r=void 0!==i&&i.length===getRoot(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;r=1===i.length&&47===i.charCodeAt(i.length-1)}return r||hasTrailingPathSeparator(e,t)?e:e.with({path:e.path+"/"})}}const extUri=new ExtUri(()=>!1),extUriBiasedIgnorePathCase=new ExtUri(e=>e.scheme!==exports.Schemas.file||!isLinux),extUriIgnorePathCase=new ExtUri(e=>!0),isEqual=extUri.isEqual.bind(extUri),isEqualOrParent=extUri.isEqualOrParent.bind(extUri),getComparisonKey=extUri.getComparisonKey.bind(extUri),basenameOrAuthority=extUri.basenameOrAuthority.bind(extUri),basename=extUri.basename.bind(extUri),extname=extUri.extname.bind(extUri),dirname=extUri.dirname.bind(extUri),joinPath=extUri.joinPath.bind(extUri),normalizePath=extUri.normalizePath.bind(extUri),relativePath=extUri.relativePath.bind(extUri),resolvePath=extUri.resolvePath.bind(extUri),isAbsolutePath=extUri.isAbsolutePath.bind(extUri),isEqualAuthority=extUri.isEqualAuthority.bind(extUri),hasTrailingPathSeparator=extUri.hasTrailingPathSeparator.bind(extUri),removeTrailingPathSeparator=extUri.removeTrailingPathSeparator.bind(extUri),addTrailingPathSeparator=extUri.addTrailingPathSeparator.bind(extUri);function distinctParents(e,t){const r=[];for(let i=0;i<e.length;i++){const n=t(e[i]);e.some((e,r)=>r!==i&&isEqualOrParent(n,t(e)))||r.push(e[i])}return r}var DataUri;function toLocalResource(e,t,r){if(t){let i=e.path;return i&&i[0]!==posix.sep&&(i=posix.sep+i),e.with({scheme:r,authority:t,path:i})}return e.with({scheme:r})}!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const r=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(e=>{const[t,i]=e.split(":");t&&i&&r.set(t,i)});const i=t.path.substring(0,t.path.indexOf(";"));return i&&r.set(e.META_DATA_MIME,i),r}}(DataUri||(DataUri={}));var resources=Object.freeze({__proto__:null,originalFSPath:originalFSPath,ExtUri:ExtUri,extUri:extUri,extUriBiasedIgnorePathCase:extUriBiasedIgnorePathCase,extUriIgnorePathCase:extUriIgnorePathCase,isEqual:isEqual,isEqualOrParent:isEqualOrParent,getComparisonKey:getComparisonKey,basenameOrAuthority:basenameOrAuthority,basename:basename,extname:extname,dirname:dirname,joinPath:joinPath,normalizePath:normalizePath,relativePath:relativePath,resolvePath:resolvePath,isAbsolutePath:isAbsolutePath,isEqualAuthority:isEqualAuthority,hasTrailingPathSeparator:hasTrailingPathSeparator,removeTrailingPathSeparator:removeTrailingPathSeparator,addTrailingPathSeparator:addTrailingPathSeparator,distinctParents:distinctParents,get DataUri(){return DataUri},toLocalResource:toLocalResource});function isThenable(e){return!!e&&"function"==typeof e.then}function createCancelablePromise(e){const t=new CancellationTokenSource,r=e(t.token),i=new Promise((e,i)=>{const n=t.token.onCancellationRequested(()=>{n.dispose(),t.dispose(),i(canceled())});Promise.resolve(r).then(r=>{n.dispose(),t.dispose(),e(r)},e=>{n.dispose(),t.dispose(),i(e)})});return new class{cancel(){t.cancel()}then(e,t){return i.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return i.finally(e)}}}function raceCancellation(e,t,r){return Promise.race([e,new Promise(e=>t.onCancellationRequested(()=>e(r)))])}function raceCancellablePromises(e){return __awaiter(this,void 0,void 0,(function*(){let t=-1;const r=e.map((e,r)=>e.then(e=>(t=r,e))),i=yield Promise.race(r);return e.forEach((e,r)=>{r!==t&&e.cancel()}),i}))}function raceTimeout(e,t,r){let i=void 0;const n=setTimeout(()=>{null==i||i(void 0),null==r||r()},t);return Promise.race([e.finally(()=>clearTimeout(n)),new Promise(e=>i=e)])}function asPromise(e){return new Promise((t,r)=>{const i=e();isThenable(i)?i.then(t,r):t(i)})}class Throttler{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{this.queuedPromise=null;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise(t=>{this.activePromise.then(e,e).then(t)})}return new Promise((e,t)=>{this.queuedPromise.then(e,t)})}return this.activePromise=e(),new Promise((e,t)=>{this.activePromise.then(t=>{this.activePromise=null,e(t)},e=>{this.activePromise=null,t(e)})})}}class Sequencer{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then(()=>e(),()=>e())}}class SequencerByKey{constructor(){this.promiseMap=new Map}queue(e,t){var r;const i=(null!==(r=this.promiseMap.get(e))&&void 0!==r?r:Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.promiseMap.get(e)===i&&this.promiseMap.delete(e)});return this.promiseMap.set(e,i),i}}class Delayer{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e,t)=>{this.doResolve=e,this.doReject=t}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}})),this.timeout=setTimeout(()=>{this.timeout=null,this.doResolve&&this.doResolve(null)},t),this.completionPromise}isTriggered(){return null!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(canceled()),this.completionPromise=null)}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}dispose(){this.cancel()}}class ThrottledDelayer{constructor(e){this.delayer=new Delayer(e),this.throttler=new Throttler}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}class Barrier{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}class AutoOpenBarrier extends Barrier{constructor(e){super(),this._timeout=setTimeout(()=>this.open(),e)}open(){clearTimeout(this._timeout),super.open()}}function timeout(e,t){return t?new Promise((r,i)=>{const n=setTimeout(()=>{s.dispose(),r()},e),s=t.onCancellationRequested(()=>{clearTimeout(n),s.dispose(),i(canceled())})}):createCancelablePromise(t=>timeout(e,t))}function disposableTimeout(e,t=0){const r=setTimeout(e,t);return toDisposable(()=>clearTimeout(r))}function sequence(e){const t=[];let r=0;const i=e.length;return Promise.resolve(null).then((function n(s){null!=s&&t.push(s);const o=r<i?e[r++]():null;return o?o.then(n):Promise.resolve(t)}))}function first(e,t=(e=>!!e),r=null){let i=0;const n=e.length,s=()=>{if(i>=n)return Promise.resolve(r);const o=e[i++];return Promise.resolve(o()).then(e=>t(e)?Promise.resolve(e):s())};return s()}function firstParallel(e,t=(e=>!!e),r=null){if(0===e.length)return Promise.resolve(r);let i=e.length;const n=()=>{var t,r;i=-1;for(const i of e)null===(r=(t=i).cancel)||void 0===r||r.call(t)};return new Promise((s,o)=>{for(const a of e)a.then(e=>{--i>=0&&t(e)?(n(),s(e)):0===i&&s(r)}).catch(e=>{--i>=0&&(n(),o(e))})})}class Limiter{constructor(e){this._size=0,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(e){return this._size++,new Promise((t,r)=>{this.outstandingPromises.push({factory:e,c:t,e:r}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}class Queue extends Limiter{constructor(){super(1)}}class ResourceQueue{constructor(){this.queues=new Map}queueFor(e,t=extUri){const r=t.getComparisonKey(e);let i=this.queues.get(r);return i||(i=new Queue,exports.Event.once(i.onFinished)(()=>{null==i||i.dispose(),this.queues.delete(r)}),this.queues.set(r,i)),i}dispose(){this.queues.forEach(e=>e.dispose()),this.queues.clear()}}class TimeoutTimer{constructor(e,t){this._token=-1,"function"==typeof e&&"number"==typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class IntervalTimer{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearInterval(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setInterval(()=>{e()},t)}}class RunOnceScheduler{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}class RunOnceWorker extends RunOnceScheduler{constructor(e,t){super(e,t),this.units=[]}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){const e=this.units;this.units=[],this.runner&&this.runner(e)}dispose(){this.units=[],super.dispose()}}class ThrottledWorker extends Disposable{constructor(e,t,r,i){super(),this.maxWorkChunkSize=e,this.maxPendingWork=t,this.throttleDelay=r,this.handler=i,this.pendingWork=[],this.throttler=this._register(new MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(e){if(this.disposed)return!1;if("number"==typeof this.maxPendingWork)if(this.throttler.value){if(this.pending+e.length>this.maxPendingWork)return!1}else if(this.pending+e.length-this.maxWorkChunkSize>this.maxPendingWork)return!1;return this.pendingWork.push(...e),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new RunOnceScheduler(()=>{this.throttler.clear(),this.doWork()},this.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}exports.runWhenIdle=void 0,function(){if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){const e=Object.freeze({didTimeout:!0,timeRemaining:()=>15});exports.runWhenIdle=t=>{const r=setTimeout(()=>t(e));let i=!1;return{dispose(){i||(i=!0,clearTimeout(r))}}}}else exports.runWhenIdle=(e,t)=>{const r=requestIdleCallback(e,"number"==typeof t?{timeout:t}:void 0);let i=!1;return{dispose(){i||(i=!0,cancelIdleCallback(r))}}}}();class IdleValue{constructor(e){this._didRun=!1,this._executor=()=>{try{this._value=e()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=exports.runWhenIdle(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}}function retry(e,t,r){return __awaiter(this,void 0,void 0,(function*(){let i;for(let n=0;n<r;n++)try{return yield e()}catch(e){i=e,yield timeout(t)}throw i}))}class TaskSequentializer{hasPending(e){return!!this._pending&&("number"==typeof e?this._pending.taskId===e:!!this._pending)}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){var e;null===(e=this._pending)||void 0===e||e.cancel()}setPending(e,t,r){return this._pending={taskId:e,cancel:()=>null==r?void 0:r(),promise:t},t.then(()=>this.donePending(e),()=>this.donePending(e)),t}donePending(e){this._pending&&e===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const e=this._next;this._next=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}setNext(e){if(this._next)this._next.run=e;else{let t,r;const i=new Promise((e,i)=>{t=e,r=i});this._next={run:e,promise:i,promiseResolve:t,promiseReject:r}}return this._next.promise}}class IntervalCounter{constructor(e){this.interval=e,this.lastIncrementTime=0,this.value=0}increment(){const e=Date.now();return e-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=e,this.value=0),this.value++,this.value}}class DeferredPromise{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(e){return new Promise(t=>{this.completeCallback(e),this.resolved=!0,t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.rejected=!0,t()})}cancel(){new Promise(e=>{this.errorCallback(canceled()),this.rejected=!0,e()})}}function isReadableStream(e){const t=e;return!!t&&[t.on,t.pause,t.resume,t.destroy].every(e=>"function"==typeof e)}function isReadableBufferedStream(e){const t=e;return!!t&&(isReadableStream(t.stream)&&Array.isArray(t.buffer)&&"boolean"==typeof t.ended)}function newWriteableStream(e,t){return new WriteableStreamImpl(e,t)}exports.Promises=void 0,(exports.Promises||(exports.Promises={})).settled=function(e){return __awaiter(this,void 0,void 0,(function*(){let t=void 0;const r=yield Promise.all(e.map(e=>e.then(e=>e,e=>{t||(t=e)})));if(void 0!==t)throw t;return r}))};class WriteableStreamImpl{constructor(e,t){this.reducer=e,this.options=t,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){var t;if(!this.state.destroyed)if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),"number"==typeof(null===(t=this.options)||void 0===t?void 0:t.highWaterMark)&&this.buffer.data.length>this.options.highWaterMark)return new Promise(e=>this.pendingWritePromises.push(e))}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(void 0!==e&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){0===this.listeners.error.length?onUnexpectedError(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors()}}removeListener(e,t){if(this.state.destroyed)return;let r=void 0;switch(e){case"data":r=this.listeners.data;break;case"end":r=this.listeners.end;break;case"error":r=this.listeners.error}if(r){const e=r.indexOf(t);e>=0&&r.splice(e,1)}}flowData(){if(this.buffer.data.length>0){const e=this.reducer(this.buffer.data);this.emitData(e),this.buffer.data.length=0;const t=[...this.pendingWritePromises];this.pendingWritePromises.length=0,t.forEach(e=>e())}}flowErrors(){if(this.listeners.error.length>0){for(const e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return!!this.state.ended&&(this.emitEnd(),this.listeners.end.length>0)}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function consumeReadable(e,t){const r=[];let i;for(;null!==(i=e.read());)r.push(i);return t(r)}function peekReadable(e,t,r){const i=[];let n=void 0;for(;null!==(n=e.read())&&i.length<r;)i.push(n);return null===n&&i.length>0?t(i):{read:()=>{if(i.length>0)return i.shift();if(void 0!==n){const e=n;return n=void 0,e}return e.read()}}}function consumeStream(e,t){return new Promise((r,i)=>{const n=[];listenStream(e,{onData:e=>{t&&n.push(e)},onError:e=>{t?i(e):r(void 0)},onEnd:()=>{r(t?t(n):void 0)}})})}function listenStream(e,t){e.on("error",e=>t.onError(e)),e.on("end",()=>t.onEnd()),e.on("data",e=>t.onData(e))}function peekStream(e,t){return new Promise((r,i)=>{const n=new DisposableStore,s=[],o=i=>{if(s.push(i),s.length>t)return n.dispose(),e.pause(),r({stream:e,buffer:s,ended:!1})},a=e=>i(e),l=()=>r({stream:e,buffer:s,ended:!0});n.add(toDisposable(()=>e.removeListener("error",a))),e.on("error",a),n.add(toDisposable(()=>e.removeListener("end",l))),e.on("end",l),n.add(toDisposable(()=>e.removeListener("data",o))),e.on("data",o)})}function toStream(e,t){const r=newWriteableStream(t);return r.end(e),r}function emptyStream(){const e=newWriteableStream(()=>{throw new Error("not supported")});return e.end(),e}function toReadable(e){let t=!1;return{read:()=>t?null:(t=!0,e)}}function transform(e,t,r){const i=newWriteableStream(r);return listenStream(e,{onData:e=>i.write(t.data(e)),onError:e=>i.error(t.error?t.error(e):e),onEnd:()=>i.end()}),i}function prefixedReadable(e,t,r){let i=!1;return{read:()=>{const n=t.read();return i?n:(i=!0,null!==n?r([e,n]):e)}}}function prefixedStream(e,t,r){let i=!1;const n=newWriteableStream(r);return listenStream(t,{onData:t=>i?n.write(t):(i=!0,n.write(r([e,t]))),onError:e=>n.error(e),onEnd:()=>{i||(i=!0,n.write(e)),n.end()}}),n}const hasBuffer="undefined"!=typeof Buffer,hasTextEncoder="undefined"!=typeof TextEncoder,hasTextDecoder="undefined"!=typeof TextDecoder;let textEncoder,textDecoder;class QMBuffer{constructor(e){this.buffer=e,this.byteLength=this.buffer.length}static alloc(e){return new QMBuffer(hasBuffer?Buffer.allocUnsafe(e):new Uint8Array(e))}static wrap(e){return hasBuffer&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new QMBuffer(e)}static fromString(e,t){return!((null==t?void 0:t.dontUseNodeBuffer)||!1)&&hasBuffer?new QMBuffer(Buffer.from(e)):hasTextEncoder?(textEncoder||(textEncoder=new TextEncoder),new QMBuffer(textEncoder.encode(e))):new QMBuffer(encodeUTF8(e))}static concat(e,t){if(void 0===t){t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].byteLength}const r=QMBuffer.alloc(t);let i=0;for(let t=0,n=e.length;t<n;t++){const n=e[t];r.set(n,i),i+=n.byteLength}return r}toString(){return hasBuffer?this.buffer.toString():hasTextDecoder?(textDecoder||(textDecoder=new TextDecoder),textDecoder.decode(this.buffer)):decodeUTF8(this.buffer)}slice(e,t){return new QMBuffer(this.buffer.subarray(e,t))}set(e,t){e instanceof QMBuffer?this.buffer.set(e.buffer,t):this.buffer.set(e,t)}readUInt32BE(e){return readUInt32BE(this.buffer,e)}writeUInt32BE(e,t){writeUInt32BE(this.buffer,e,t)}readUInt32LE(e){return readUInt32LE(this.buffer,e)}writeUInt32LE(e,t){writeUInt32LE(this.buffer,e,t)}readUInt8(e){return readUInt8(this.buffer,e)}writeUInt8(e,t){writeUInt8(this.buffer,e,t)}}function readUInt16LE(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function writeUInt16LE(e,t,r){e[r+0]=255&t,t>>>=8,e[r+1]=255&t}function readUInt32BE(e,t){return e[t]*Math.pow(2,24)+e[t+1]*Math.pow(2,16)+e[t+2]*Math.pow(2,8)+e[t+3]}function writeUInt32BE(e,t,r){e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t}function readUInt32LE(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function writeUInt32LE(e,t,r){e[r+0]=255&t,t>>>=8,e[r+1]=255&t,t>>>=8,e[r+2]=255&t,t>>>=8,e[r+3]=255&t}function readUInt8(e,t){return e[t]}function writeUInt8(e,t,r){e[r]=t}function readableToBuffer(e){return consumeReadable(e,e=>QMBuffer.concat(e))}function bufferToReadable(e){return toReadable(e)}function streamToBuffer(e){return consumeStream(e,e=>QMBuffer.concat(e))}function bufferedStreamToBuffer(e){return __awaiter(this,void 0,void 0,(function*(){return e.ended?QMBuffer.concat(e.buffer):QMBuffer.concat([...e.buffer,yield streamToBuffer(e.stream)])}))}function bufferToStream(e){return toStream(e,e=>QMBuffer.concat(e))}function streamToBufferReadableStream(e){return transform(e,{data:e=>"string"==typeof e?QMBuffer.fromString(e):QMBuffer.wrap(e)},e=>QMBuffer.concat(e))}function newWriteableBufferStream(e){return newWriteableStream(e=>QMBuffer.concat(e),e)}function prefixedBufferReadable(e,t){return prefixedReadable(e,t,e=>QMBuffer.concat(e))}function prefixedBufferStream(e,t){return prefixedStream(e,t,e=>QMBuffer.concat(e))}exports.CharCode=void 0,function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.LineFeed=10]="LineFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.DoubleQuote=34]="DoubleQuote",e[e.Hash=35]="Hash",e[e.DollarSign=36]="DollarSign",e[e.PercentSign=37]="PercentSign",e[e.Ampersand=38]="Ampersand",e[e.SingleQuote=39]="SingleQuote",e[e.OpenParen=40]="OpenParen",e[e.CloseParen=41]="CloseParen",e[e.Asterisk=42]="Asterisk",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit1=49]="Digit1",e[e.Digit2=50]="Digit2",e[e.Digit3=51]="Digit3",e[e.Digit4=52]="Digit4",e[e.Digit5=53]="Digit5",e[e.Digit6=54]="Digit6",e[e.Digit7=55]="Digit7",e[e.Digit8=56]="Digit8",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.Semicolon=59]="Semicolon",e[e.LessThan=60]="LessThan",e[e.Equals=61]="Equals",e[e.GreaterThan=62]="GreaterThan",e[e.QuestionMark=63]="QuestionMark",e[e.AtSign=64]="AtSign",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.OpenSquareBracket=91]="OpenSquareBracket",e[e.Backslash=92]="Backslash",e[e.CloseSquareBracket=93]="CloseSquareBracket",e[e.Caret=94]="Caret",e[e.Underline=95]="Underline",e[e.BackTick=96]="BackTick",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace",e[e.Tilde=126]="Tilde",e[e.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",e[e.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",e[e.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",e[e.U_Combining_Tilde=771]="U_Combining_Tilde",e[e.U_Combining_Macron=772]="U_Combining_Macron",e[e.U_Combining_Overline=773]="U_Combining_Overline",e[e.U_Combining_Breve=774]="U_Combining_Breve",e[e.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",e[e.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",e[e.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",e[e.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",e[e.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",e[e.U_Combining_Caron=780]="U_Combining_Caron",e[e.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",e[e.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",e[e.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",e[e.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",e[e.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",e[e.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",e[e.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",e[e.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",e[e.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",e[e.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",e[e.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",e[e.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",e[e.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",e[e.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",e[e.U_Combining_Horn=795]="U_Combining_Horn",e[e.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",e[e.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",e[e.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",e[e.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",e[e.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",e[e.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",e[e.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",e[e.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",e[e.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",e[e.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",e[e.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",e[e.U_Combining_Cedilla=807]="U_Combining_Cedilla",e[e.U_Combining_Ogonek=808]="U_Combining_Ogonek",e[e.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",e[e.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",e[e.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",e[e.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",e[e.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",e[e.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",e[e.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",e[e.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",e[e.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",e[e.U_Combining_Low_Line=818]="U_Combining_Low_Line",e[e.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",e[e.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",e[e.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",e[e.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",e[e.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",e[e.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",e[e.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",e[e.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",e[e.U_Combining_Square_Below=827]="U_Combining_Square_Below",e[e.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",e[e.U_Combining_X_Above=829]="U_Combining_X_Above",e[e.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",e[e.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",e[e.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",e[e.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",e[e.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",e[e.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",e[e.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",e[e.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",e[e.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",e[e.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",e[e.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",e[e.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",e[e.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",e[e.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",e[e.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",e[e.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",e[e.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",e[e.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",e[e.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",e[e.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",e[e.U_Combining_Fermata=850]="U_Combining_Fermata",e[e.U_Combining_X_Below=851]="U_Combining_X_Below",e[e.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",e[e.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",e[e.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",e[e.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",e[e.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",e[e.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",e[e.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",e[e.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",e[e.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",e[e.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",e[e.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",e[e.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",e[e.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",e[e.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",e[e.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",e[e.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",e[e.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",e[e.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",e[e.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",e[e.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",e[e.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",e[e.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",e[e.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",e[e.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",e[e.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",e[e.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",e[e.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",e[e.LINE_SEPARATOR=8232]="LINE_SEPARATOR",e[e.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",e[e.NEXT_LINE=133]="NEXT_LINE",e[e.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",e[e.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",e[e.U_DIAERESIS=168]="U_DIAERESIS",e[e.U_MACRON=175]="U_MACRON",e[e.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",e[e.U_CEDILLA=184]="U_CEDILLA",e[e.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",e[e.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",e[e.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",e[e.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",e[e.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",e[e.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",e[e.U_BREVE=728]="U_BREVE",e[e.U_DOT_ABOVE=729]="U_DOT_ABOVE",e[e.U_RING_ABOVE=730]="U_RING_ABOVE",e[e.U_OGONEK=731]="U_OGONEK",e[e.U_SMALL_TILDE=732]="U_SMALL_TILDE",e[e.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",e[e.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",e[e.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",e[e.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",e[e.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",e[e.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",e[e.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",e[e.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",e[e.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",e[e.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",e[e.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",e[e.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",e[e.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",e[e.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",e[e.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",e[e.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",e[e.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",e[e.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",e[e.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",e[e.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",e[e.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",e[e.U_GREEK_TONOS=900]="U_GREEK_TONOS",e[e.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",e[e.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",e[e.U_GREEK_PSILI=8127]="U_GREEK_PSILI",e[e.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",e[e.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",e[e.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",e[e.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",e[e.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",e[e.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",e[e.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",e[e.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",e[e.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",e[e.U_GREEK_VARIA=8175]="U_GREEK_VARIA",e[e.U_GREEK_OXIA=8189]="U_GREEK_OXIA",e[e.U_GREEK_DASIA=8190]="U_GREEK_DASIA",e[e.U_OVERLINE=8254]="U_OVERLINE",e[e.UTF8_BOM=65279]="UTF8_BOM"}(exports.CharCode||(exports.CharCode={}));const minute=60,hour=3600,day=86400,week=7*day,month=30*day,year=365*day;function fromNow(e,t){"number"!=typeof e&&(e=e.getTime());const r=Math.round(((new Date).getTime()-e)/1e3);if(r<-30)return"date.fromNow.in, in "+fromNow((new Date).getTime()+1e3*r,!1);if(r<30)return"now";let i;return r<60?(i=r,t?1===i?i+" sec ago":i+" secs ago":1===i?i+" sec":i+" secs"):r<3600?(i=Math.floor(r/60),t?1===i?i+" min ago":i+" mins ago":1===i?i+" min":i+" mins"):r<day?(i=Math.floor(r/3600),t?1===i?i+" hr ago":i+" hrs ago":1===i?i+" hr":i+" hrs"):r<week?(i=Math.floor(r/day),t?1===i?i+" day ago":i+" days ago":1===i?i+" day":i+" days"):r<month?(i=Math.floor(r/week),t?1===i?i+" wk ago":i+" wks ago":1===i?i+" wk":i+" wks"):r<year?(i=Math.floor(r/month),t?1===i?i+" mo ago":i+" mos ago":1===i?i+" mo":i+" mos"):(i=Math.floor(r/year),t?1===i?i+" yr ago":i+" yrs ago":1===i?i+" yr":i+" yrs")}function toLocalISOString(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}function exceptionToErrorMessage(e,t){return t&&(e.stack||e.stacktrace)?`${detectSystemErrorMessage(e)}: ${stackToString(e.stack)||stackToString(e.stacktrace)}`:detectSystemErrorMessage(e)}function stackToString(e){return Array.isArray(e)?e.join("\n"):e}function detectSystemErrorMessage(e){return"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?`A system error occurred (${e.message})`:e.message||"An unknown error occurred. Please consult the log for more details."}function toErrorMessage(e=null,t=!1){if(!e)return"An unknown error occurred. Please consult the log for more details.";if(Array.isArray(e)){const r=coalesce(e),i=toErrorMessage(r[0],t);return r.length>1?`${i} (${r.length} errors in total)`:i}if(isString(e))return e;if(e.detail){const r=e.detail;if(r.error)return exceptionToErrorMessage(r.error,t);if(r.exception)return exceptionToErrorMessage(r.exception,t)}return e.stack?exceptionToErrorMessage(e,t):e.message?e.message:"An unknown error occurred. Please consult the log for more details."}var _a,_b,_ReadonlyMapView_source,UriIteratorState;function getOrSet(e,t,r){let i=e.get(t);return void 0===i&&(i=r,e.set(t,i)),i}function mapToString(e){const t=[];return e.forEach((e,r)=>{t.push(`${r} => ${e}`)}),`Map(${e.size}) {${t.join(", ")}}`}function setToString(e){const t=[];return e.forEach(e=>{t.push(e)}),`Set(${e.size}) {${t.join(", ")}}`}class StringIterator{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}class ConfigKeysIterator{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?compareSubstring(e,this._value,0,e.length,this._from,this._to):compareSubstringIgnoreCase(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class PathIterator{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?compareSubstring(e,this._value,0,e.length,this._from,this._to):compareSubstringIgnoreCase(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}!function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"}(UriIteratorState||(UriIteratorState={}));class UriIterator{constructor(e){this._ignorePathCasing=e,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new PathIterator(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return compareIgnoreCase(e,this._value.scheme);if(2===this._states[this._stateIdx])return compareIgnoreCase(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return compare(e,this._value.query);if(5===this._states[this._stateIdx])return compare(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}}class TernarySearchTreeNode{isEmpty(){return!(this.left||this.mid||this.right||this.value)}}class TernarySearchTree{constructor(e){this._iter=e}static forUris(e=(()=>!1)){return new TernarySearchTree(new UriIterator(e))}static forPaths(){return new TernarySearchTree(new PathIterator)}static forStrings(){return new TernarySearchTree(new StringIterator)}static forConfigKeys(){return new TernarySearchTree(new ConfigKeysIterator)}clear(){this._root=void 0}set(e,t){const r=this._iter.reset(e);let i;for(this._root||(this._root=new TernarySearchTreeNode,this._root.segment=r.value()),i=this._root;;){const e=r.cmp(i.segment);if(e>0)i.left||(i.left=new TernarySearchTreeNode,i.left.segment=r.value()),i=i.left;else if(e<0)i.right||(i.right=new TernarySearchTreeNode,i.right.segment=r.value()),i=i.right;else{if(!r.hasNext())break;r.next(),i.mid||(i.mid=new TernarySearchTreeNode,i.mid.segment=r.value()),i=i.mid}}const n=i.value;return i.value=t,i.key=e,n}get(e){var t;return null===(t=this._getNode(e))||void 0===t?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let r=this._root;for(;r;){const e=t.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else{if(!t.hasNext())break;t.next(),r=r.mid}}return r}has(e){const t=this._getNode(e);return!(void 0===(null==t?void 0:t.value)&&void 0===(null==t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const r=this._iter.reset(e),i=[];let n=this._root;for(;n;){const e=r.cmp(n.segment);if(e>0)i.push([1,n]),n=n.left;else if(e<0)i.push([-1,n]),n=n.right;else{if(!r.hasNext()){for(t?(n.left=void 0,n.mid=void 0,n.right=void 0):n.value=void 0;i.length>0&&n.isEmpty();){let[e,t]=i.pop();switch(e){case 1:t.left=void 0;break;case 0:t.mid=void 0;break;case-1:t.right=void 0}n=t}break}r.next(),i.push([0,n]),n=n.mid}}}findSubstr(e){const t=this._iter.reset(e);let r=this._root,i=void 0;for(;r;){const e=t.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else{if(!t.hasNext())break;t.next(),i=r.value||i,r=r.mid}}return r&&r.value||i}findSuperstr(e){const t=this._iter.reset(e);let r=this._root;for(;r;){const e=t.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else{if(!t.hasNext())return r.mid?this._entries(r.mid):void 0;t.next(),r=r.mid}}}forEach(e){for(const[t,r]of this)e(r,t)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){if(!e)return;const t=[e];for(;t.length>0;){const e=t.pop();e&&(e.value&&(yield[e.key,e.value]),e.left&&t.push(e.left),e.mid&&t.push(e.mid),e.right&&t.push(e.right))}}}class ResourceMap{constructor(e,t){this[_a]="ResourceMap",e instanceof ResourceMap?(this.map=new Map(e.map),this.toKey=null!=t?t:ResourceMap.defaultToKey):(this.map=new Map,this.toKey=null!=e?e:ResourceMap.defaultToKey)}set(e,t){return this.map.set(this.toKey(e),t),this}get(e){return this.map.get(this.toKey(e))}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){void 0!==t&&(e=e.bind(t));for(let[t,r]of this.map)e(r,URI.parse(t),this)}values(){return this.map.values()}*keys(){for(let e of this.map.keys())yield URI.parse(e)}*entries(){for(let e of this.map.entries())yield[URI.parse(e[0]),e[1]]}*[(_a=Symbol.toStringTag,Symbol.iterator)](){for(let e of this.map)yield[URI.parse(e[0]),e[1]]}}ResourceMap.defaultToKey=e=>e.toString(),exports.Touch=void 0,function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"}(exports.Touch||(exports.Touch={}));class LinkedMap{constructor(){this[_b]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const r=this._map.get(e);if(r)return 0!==t&&this.touch(r,t),r.value}set(e,t,r=0){let i=this._map.get(e);if(i)i.value=t,0!==r&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const r=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let r=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const e={value:r.key,done:!1};return r=r.next,e}return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let r=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const e={value:r.value,done:!1};return r=r.next,e}return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let r=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const e={value:[r.key,r.value],done:!1};return r=r.next,e}return{value:void 0,done:!0}}};return i}[(_b=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===t){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(const[t,r]of e)this.set(t,r)}}class LRUCache extends LinkedMap{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}class ReadonlyMapView{constructor(e){_ReadonlyMapView_source.set(this,void 0),__classPrivateFieldSet(this,_ReadonlyMapView_source,e)}get size(){return __classPrivateFieldGet(this,_ReadonlyMapView_source).size}forEach(e,t){__classPrivateFieldGet(this,_ReadonlyMapView_source).forEach(e,t)}get(e){return __classPrivateFieldGet(this,_ReadonlyMapView_source).get(e)}has(e){return __classPrivateFieldGet(this,_ReadonlyMapView_source).has(e)}entries(){return __classPrivateFieldGet(this,_ReadonlyMapView_source).entries()}keys(){return __classPrivateFieldGet(this,_ReadonlyMapView_source).keys()}values(){return __classPrivateFieldGet(this,_ReadonlyMapView_source).values()}[(_ReadonlyMapView_source=new WeakMap,Symbol.iterator)](){return __classPrivateFieldGet(this,_ReadonlyMapView_source).entries()}}function getEmptyExpression(){return Object.create(null)}const GLOBSTAR="**",GLOB_SPLIT="/",PATH_REGEX="[/\\\\]",NO_PATH_REGEX="[^/\\\\]",ALL_FORWARD_SLASHES=/\//g;function starsToRegExp(e){switch(e){case 0:return"";case 1:return"[^/\\\\]*?";default:return"(?:[/\\\\]|[^/\\\\]+[/\\\\]|[/\\\\][^/\\\\]+)*?"}}function splitGlobAware(e,t){if(!e)return[];const r=[];let i=!1,n=!1,s="";for(const o of e){switch(o){case t:if(!i&&!n){r.push(s),s="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":n=!0;break;case"]":n=!1}s+=o}return s&&r.push(s),r}function parseRegExp(e){if(!e)return"";let t="";const r=splitGlobAware(e,"/");if(r.every(e=>"**"===e))t=".*";else{let e=!1;r.forEach((i,n)=>{if("**"===i)return void(e||(t+=starsToRegExp(2),e=!0));let s=!1,o="",a=!1,l="";for(const e of i)if("}"!==e&&s)o+=e;else if(!a||"]"===e&&l)switch(e){case"{":s=!0;continue;case"[":a=!0;continue;case"}":const r=`(?:${splitGlobAware(o,",").map(e=>parseRegExp(e)).join("|")})`;t+=r,s=!1,o="";break;case"]":t+="["+l+"]",a=!1,l="";break;case"?":t+="[^/\\\\]";continue;case"*":t+=starsToRegExp(1);continue;default:t+=escapeRegExpCharacters(e)}else{let t;t="-"===e?e:"^"!==e&&"!"!==e||l?"/"===e?"":escapeRegExpCharacters(e):"^",l+=t}n<r.length-1&&("**"!==r[n+1]||n+2<r.length)&&(t+="[/\\\\]"),e=!1})}return t}const T1=/^\*\*\/\*\.[\w\.-]+$/,T2=/^\*\*\/([\w\.-]+)\/?$/,T3=/^{\*\*\/[\*\.]?[\w\.-]+\/?(,\*\*\/[\*\.]?[\w\.-]+\/?)*}$/,T3_2=/^{\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?(,\*\*\/[\*\.]?[\w\.-]+(\/(\*\*)?)?)*}$/,T4=/^\*\*((\/[\w\.-]+)+)\/?$/,T5=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,CACHE=new LRUCache(1e4),FALSE=function(){return!1},NULL=function(){return null};function parsePattern(e,t){if(!e)return NULL;let r;r="string"!=typeof e?e.pattern:e,r=r.trim();const i=`${r}_${!!t.trimForExclusions}`;let n,s=CACHE.get(i);if(s)return wrapRelativePattern(s,e);if(T1.test(r)){const e=r.substr(4);s=function(t,i){return"string"==typeof t&&t.endsWith(e)?r:null}}else s=(n=T2.exec(trimForExclusions(r,t)))?trivia2(n[1],r):(t.trimForExclusions?T3_2:T3).test(r)?trivia3(r,t):(n=T4.exec(trimForExclusions(r,t)))?trivia4and5(n[1].substr(1),r,!0):(n=T5.exec(trimForExclusions(r,t)))?trivia4and5(n[1],r,!1):toRegExp(r);return CACHE.set(i,s),wrapRelativePattern(s,e)}function wrapRelativePattern(e,t){return"string"==typeof t?e:function(r,i){return isEqualOrParent$1(r,t.base)?e(relative(t.base,r),i):null}}function trimForExclusions(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function trivia2(e,t){const r="/"+e,i="\\"+e,n=function(n,s){return"string"!=typeof n?null:s?s===e?t:null:n===e||n.endsWith(r)||n.endsWith(i)?t:null},s=[e];return n.basenames=s,n.patterns=[t],n.allBasenames=s,n}function trivia3(e,t){const r=aggregateBasenameMatches(e.slice(1,-1).split(",").map(e=>parsePattern(e,t)).filter(e=>e!==NULL),e),i=r.length;if(!i)return NULL;if(1===i)return r[0];const n=function(t,i){for(let n=0,s=r.length;n<s;n++)if(r[n](t,i))return e;return null},s=r.find(e=>!!e.allBasenames);s&&(n.allBasenames=s.allBasenames);const o=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(n.allPaths=o),n}function trivia4and5(e,t,r){const i=sep===posix.sep,n=i?e:e.replace(ALL_FORWARD_SLASHES,sep),s=sep+n,o=posix.sep+e,a=r?function(r,a){return"string"!=typeof r||r!==n&&!r.endsWith(s)&&(i||r!==e&&!r.endsWith(o))?null:t}:function(r,s){return"string"!=typeof r||r!==n&&(i||r!==e)?null:t};return a.allPaths=[(r?"*/":"./")+e],a}function toRegExp(e){try{const t=new RegExp(`^${parseRegExp(e)}$`);return function(r){return t.lastIndex=0,"string"==typeof r&&t.test(r)?e:null}}catch(e){return NULL}}function match(e,t,r){return!(!e||"string"!=typeof t)&&parse(e)(t,void 0,r)}function parse(e,t={}){if(!e)return FALSE;if("string"==typeof e||isRelativePattern(e)){const r=parsePattern(e,t);if(r===NULL)return FALSE;const i=function(e,t){return!!r(e,t)};return r.allBasenames&&(i.allBasenames=r.allBasenames),r.allPaths&&(i.allPaths=r.allPaths),i}return parsedExpression(e,t)}function hasSiblingPromiseFn(e){if(!e)return;let t;return r=>(t||(t=(e()||Promise.resolve([])).then(e=>e?listToMap(e):{})),t.then(e=>!!e[r]))}function hasSiblingFn(e){if(!e)return;let t;return r=>{if(!t){const r=e();t=r?listToMap(r):{}}return!!t[r]}}function listToMap(e){const t={};for(const r of e)t[r]=!0;return t}function isRelativePattern(e){const t=e;return t&&"string"==typeof t.base&&"string"==typeof t.pattern}function getBasenameTerms(e){return e.allBasenames||[]}function getPathTerms(e){return e.allPaths||[]}function parsedExpression(e,t){const r=aggregateBasenameMatches(Object.getOwnPropertyNames(e).map(r=>parseExpressionPattern(r,e[r],t)).filter(e=>e!==NULL)),i=r.length;if(!i)return NULL;if(!r.some(e=>!!e.requiresSiblings)){if(1===i)return r[0];const e=function(e,t){for(let i=0,n=r.length;i<n;i++){const n=r[i](e,t);if(n)return n}return null},t=r.find(e=>!!e.allBasenames);t&&(e.allBasenames=t.allBasenames);const n=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return n.length&&(e.allPaths=n),e}const n=function(e,t,i){let n=void 0;for(let s=0,o=r.length;s<o;s++){const o=r[s];o.requiresSiblings&&i&&(t||(t=basename$1(e)),n||(n=t.substr(0,t.length-extname$1(e).length)));const a=o(e,t,n,i);if(a)return a}return null},s=r.find(e=>!!e.allBasenames);s&&(n.allBasenames=s.allBasenames);const o=r.reduce((e,t)=>t.allPaths?e.concat(t.allPaths):e,[]);return o.length&&(n.allPaths=o),n}function parseExpressionPattern(e,t,r){if(!1===t)return NULL;const i=parsePattern(e,r);if(i===NULL)return NULL;if("boolean"==typeof t)return i;if(t){const r=t.when;if("string"==typeof r){const t=(t,n,s,o)=>{if(!o||!i(t,n))return null;const a=o(r.replace("$(basename)",s));return isThenable(a)?a.then(t=>t?e:null):a?e:null};return t.requiresSiblings=!0,t}}return i}function aggregateBasenameMatches(e,t){const r=e.filter(e=>!!e.basenames);if(r.length<2)return e;const i=r.reduce((e,t)=>{const r=t.basenames;return r?e.concat(r):e},[]);let n;if(t){n=[];for(let e=0,r=i.length;e<r;e++)n.push(t)}else n=r.reduce((e,t)=>{const r=t.patterns;return r?e.concat(r):e},[]);const s=function(e,t){if("string"!=typeof e)return null;if(!t){let r;for(r=e.length;r>0;r--){const t=e.charCodeAt(r-1);if(47===t||92===t)break}t=e.substr(r)}const r=i.indexOf(t);return-1!==r?n[r]:null};s.basenames=i,s.patterns=n,s.allBasenames=i;const o=e.filter(e=>!e.basenames);return o.push(s),o}var glob=Object.freeze({__proto__:null,getEmptyExpression:getEmptyExpression,splitGlobAware:splitGlobAware,match:match,parse:parse,hasSiblingPromiseFn:hasSiblingPromiseFn,hasSiblingFn:hasSiblingFn,isRelativePattern:isRelativePattern,getBasenameTerms:getBasenameTerms,getPathTerms:getPathTerms});exports.MarshalledId=void 0,function(e){e[e.Uri=1]="Uri",e[e.Regexp=2]="Regexp",e[e.ScmResource=3]="ScmResource",e[e.ScmResourceGroup=4]="ScmResourceGroup",e[e.ScmProvider=5]="ScmProvider",e[e.CommentController=6]="CommentController",e[e.CommentThread=7]="CommentThread",e[e.CommentThreadReply=8]="CommentThreadReply",e[e.CommentNode=9]="CommentNode",e[e.CommentThreadNode=10]="CommentThreadNode",e[e.TimelineActionContext=11]="TimelineActionContext",e[e.NotebookCellActionContext=12]="NotebookCellActionContext",e[e.TestItemContext=13]="TestItemContext"}(exports.MarshalledId||(exports.MarshalledId={}));class Sequence{constructor(){this.elements=[],this._onDidSplice=new Emitter,this.onDidSplice=this._onDidSplice.event}splice(e,t,r=[]){this.elements.splice(e,t,...r),this._onDidSplice.fire({start:e,deleteCount:t,toInsert:r})}}class SimpleSequence{constructor(e,t,r){this._elements=[...e],this.onDidSplice=exports.Event.any(exports.Event.map(t,e=>({start:this.elements.length,deleteCount:0,toInsert:[e]})),exports.Event.map(exports.Event.filter(exports.Event.map(r,e=>this.elements.indexOf(e)),e=>e>-1),e=>({start:e,deleteCount:1,toInsert:[]}))),this.disposable=this.onDidSplice(({start:e,deleteCount:t,toInsert:r})=>this._elements.splice(e,t,...r))}get elements(){return this._elements}dispose(){this.disposable.dispose()}}exports.ScrollbarVisibility=void 0,function(e){e[e.Auto=1]="Auto",e[e.Hidden=2]="Hidden",e[e.Visible=3]="Visible"}(exports.ScrollbarVisibility||(exports.ScrollbarVisibility={}));class ScrollState{constructor(e,t,r,i,n,s){this._scrollStateBrand=void 0,e|=0,t|=0,r|=0,i|=0,n|=0,s|=0,this.rawScrollLeft=r,this.rawScrollTop=s,e<0&&(e=0),r+e>t&&(r=t-e),r<0&&(r=0),i<0&&(i=0),s+i>n&&(s=n-i),s<0&&(s=0),this.width=e,this.scrollWidth=t,this.scrollLeft=r,this.height=i,this.scrollHeight=n,this.scrollTop=s}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new ScrollState(void 0!==e.width?e.width:this.width,void 0!==e.scrollWidth?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,void 0!==e.height?e.height:this.height,void 0!==e.scrollHeight?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new ScrollState(this.width,this.scrollWidth,void 0!==e.scrollLeft?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,void 0!==e.scrollTop?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const r=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,n=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,a=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:r,scrollWidthChanged:i,scrollLeftChanged:n,heightChanged:s,scrollHeightChanged:o,scrollTopChanged:a}}}class Scrollable extends Disposable{constructor(e,t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Emitter),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e,this._scheduleAtNextAnimationFrame=t,this._state=new ScrollState(0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const r=this._state.withScrollDimensions(e,t);this._setState(r,Boolean(this._smoothScrolling)),this._smoothScrolling&&this._smoothScrolling.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:void 0===e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:void 0===e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};const r=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===r.scrollLeft&&this._smoothScrolling.to.scrollTop===r.scrollTop)return;let i;i=t?new SmoothScrollingOperation(this._smoothScrolling.from,r,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,r,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const t=this._state.withScrollPosition(e);this._smoothScrolling=SmoothScrollingOperation.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);return this._setState(t,!0),this._smoothScrolling?e.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})):void 0}_setState(e,t){const r=this._state;r.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(r,t)))}}class SmoothScrollingUpdate{constructor(e,t,r){this.scrollLeft=e,this.scrollTop=t,this.isDone=r}}function createEaseOutCubic(e,t){const r=t-e;return function(t){return e+r*easeOutCubic(t)}}function createComposed(e,t,r){return function(i){return i<r?e(i/r):t((i-r)/(1-r))}}class SmoothScrollingOperation{constructor(e,t,r,i){this.from=e,this.to=t,this.duration=i,this.startTime=r,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,r){if(Math.abs(e-t)>2.5*r){let i,n;return e<t?(i=e+.75*r,n=t-.75*r):(i=e-.75*r,n=t+.75*r),createComposed(createEaseOutCubic(e,i),createEaseOutCubic(n,t),.33)}return createEaseOutCubic(e,t)}dispose(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const e=this.scrollLeft(t),r=this.scrollTop(t);return new SmoothScrollingUpdate(e,r,!1)}return new SmoothScrollingUpdate(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,r){return SmoothScrollingOperation.start(e,t,r)}static start(e,t,r){r+=10;const i=Date.now()-10;return new SmoothScrollingOperation(e,t,i,r)}}function easeInCubic(e){return Math.pow(e,3)}function easeOutCubic(e){return 1-easeInCubic(1-e)}function toUint8(e){return e<0?0:e>255?255:0|e}function toUint32(e){return e<0?0:e>4294967295?4294967295:0|e}exports.Constants=void 0,function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"}(exports.Constants||(exports.Constants={}));const _UUIDPattern=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function isUUID(e){return _UUIDPattern.test(e)}String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))});const _data=new Uint8Array(16),_hex=[];for(let e=0;e<256;e++)_hex.push(e.toString(16).padStart(2,"0"));let _fillRandomValues;function generateUuid(e="-"){_fillRandomValues(_data),_data[6]=15&_data[6]|64,_data[8]=63&_data[8]|128;let t=0,r="";return r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=e,r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=e,r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=e,r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=e,r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=_hex[_data[t++]],r+=_hex[_data[t++]],r}function storeServiceDependency(e,t,r,i){t[exports._util.DI_TARGET]===t?t[exports._util.DI_DEPENDENCIES].push({id:e,index:r,optional:i}):(t[exports._util.DI_DEPENDENCIES]=[{id:e,index:r,optional:i}],t[exports._util.DI_TARGET]=t)}function createDecorator(e){if(exports._util.servicesIds.has(e))return exports._util.servicesIds.get(e);const t=function(e,r,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");storeServiceDependency(t,e,i,!1)};return t.toString=()=>e,exports._util.servicesIds.set(e,t),t}function refineServiceDecorator(e){return e}function optional(e){return function(t,r,i){if(3!==arguments.length)throw new Error("@optional-decorator can only be used to decorate a parameter");storeServiceDependency(e,t,i,!0)}}_fillRandomValues="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(let t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e},exports._util=void 0,function(e){e.servicesIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(exports._util||(exports._util={}));const IInstantiationService=createDecorator("instantiationService");class SyncDescriptor{constructor(e,t=[],r=!1){this.ctor=e,this.staticArguments=t,this.supportDelayedInstantiation=r}}const createSyncDescriptor=(e,...t)=>new SyncDescriptor(e,t),_registry=[];function registerSingleton(e,t,r){t instanceof SyncDescriptor||(t=new SyncDescriptor(t,[],r)),_registry.push([e,t])}function getSingletonServiceDescriptors(){return _registry}const ICommandService=createDecorator("commandService"),CommandsRegistry=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new Emitter,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw new Error("invalid Command");if("string"==typeof e){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.description){const t=[];for(let r of e.description.args)t.push(r.constraint);const r=e.handler;e.handler=function(e,...i){return validateConstraints(i,t),r(e,...i)}}const{id:r}=e;let i=this._commands.get(r);i||(i=new LinkedList,this._commands.set(r,i));let n=i.unshift(e),s=toDisposable(()=>{n();const e=this._commands.get(r);(null==e?void 0:e.isEmpty())&&this._commands.delete(r)});return this._onDidRegisterCommand.fire(r),s}registerCommandAlias(e,t){return CommandsRegistry.registerCommand(e,(e,r)=>e.get(ICommandService).executeCommand(t,...r))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return exports.Iterable.first(t)}getCommands(){const e=new Map;for(const t of this._commands.keys()){const r=this.getCommand(t);r&&e.set(t,r)}return e}};exports.CommandService=class extends Disposable{constructor(e){super(),this._instantiationService=e,this._onWillExecuteCommand=this._register(new Emitter),this.onWillExecuteCommand=this._onWillExecuteCommand.event,this._onDidExecuteCommand=new Emitter,this.onDidExecuteCommand=this._onDidExecuteCommand.event}executeCommand(e,...t){return this._tryExecuteCommand(e,t)}_tryExecuteCommand(e,...t){const r=CommandsRegistry.getCommand(e);if(!r)return Promise.reject(new Error(`command ${e} not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction(r.handler,...t);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(e){return Promise.reject(e)}}},exports.CommandService=__decorate([__param(0,IInstantiationService),__metadata("design:paramtypes",[Object])],exports.CommandService),registerSingleton(ICommandService,exports.CommandService,!0);class ServiceCollection{constructor(...e){this._entries=new Map;for(let[t,r]of e)this.set(t,r)}set(e,t){const r=this._entries.get(e);return this._entries.set(e,t),r}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}class Node{constructor(e){this.incoming=new Map,this.outgoing=new Map,this.data=e}}class Graph{constructor(e){this._hasFn=e,this._nodes=new Map}roots(){const e=[];for(let t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);r.outgoing.set(this._hasFn(t),i),i.incoming.set(this._hasFn(e),r)}removeNode(e){const t=this._hasFn(e);this._nodes.delete(t);for(let e of this._nodes.values())e.outgoing.delete(t),e.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hasFn(e);let r=this._nodes.get(t);return r||(r=new Node(e),this._nodes.set(t,r)),r}lookup(e){return this._nodes.get(this._hasFn(e))}isEmpty(){return 0===this._nodes.size}toString(){let e=[];for(let[t,r]of this._nodes)e.push(`${t}, (incoming)[${[...r.incoming.keys()].join(", ")}], (outgoing)[${[...r.outgoing.keys()].join(", ")}]`);return e.join("\n")}findCycleSlow(){for(let[e,t]of this._nodes){const r=new Set([e]),i=this._findCycle(t,r);if(i)return i}}_findCycle(e,t){for(let[r,i]of e.outgoing){if(t.has(r))return[...t,r].join(" -> ");t.add(r);const e=this._findCycle(i,t);if(e)return e;t.delete(r)}}}class CyclicDependencyError extends Error{constructor(e){var t;super("cycle dependency between services"),this.message=null!==(t=e.findCycleSlow())&&void 0!==t?t:"UNABLE to detect cycle, dumping graph: \n"+e.toString()}}class InstantiationService{constructor(e=new ServiceCollection,t=!1,r){this._activeInstantiations=new Set,this._services=e,this._strict=t,this._parent=r,this._services.set(IInstantiationService,this)}createChild(e){return new InstantiationService(e,this._strict,this)}invokeFunction(e,...t){let r=Trace.traceCreation(e),i=!1;try{return e({get:(e,t)=>{if(i)throw illegalState("service accessor is only valid during the invocation of its target method");const n=this._getOrCreateServiceInstance(e,r);if(!n&&t!==optional)throw new Error("[invokeFunction] unknown service "+e);return n}},...t)}finally{i=!0,r.stop()}}createInstance(e,...t){let r,i;return e instanceof SyncDescriptor?(r=Trace.traceCreation(e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),r)):(r=Trace.traceCreation(e),i=this._createInstance(e,t,r)),r.stop(),i}_createInstance(e,t=[],r){let i=exports._util.getServiceDependencies(e).sort((e,t)=>e.index-t.index),n=[];for(const t of i){let i=this._getOrCreateServiceInstance(t.id,r);if(!i&&this._strict&&!t.optional)throw new Error("[createInstance] "+e.name);n.push(i)}let s=i.length>0?i[0].index:t.length;if(t.length!==s){console.warn(`[createInstance First service dependency of ${e.name}] at position ${s+1} conflicts with ${t.length} static arguments`);let r=s-t.length;t=r>0?t.concat(new Array(r)):t.slice(0,s)}return new e(...[...t,...n])}_setServiceInstance(e,t){if(this._services.get(e)instanceof SyncDescriptor)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){let t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){let r=this._getServiceInstanceOrDescriptor(e);return r instanceof SyncDescriptor?this._safeCreateAndCacheServiceInstance(e,r,t.branch(e,!0)):(t.branch(e,!1),r)}_safeCreateAndCacheServiceInstance(e,t,r){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,r)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,r){const i=new Graph(e=>e.id.toString());let n=0;const s=[{id:e,desc:t,_trace:r}];for(;s.length;){const t=s.pop();if(i.lookupOrInsertNode(t),n++>1e3)throw new CyclicDependencyError(i);for(let r of exports._util.getServiceDependencies(t.desc.ctor)){let n=this._getServiceInstanceOrDescriptor(r.id);if(n||n.optional||console.warn(`[createInstance] ${e} depends on ${r.id} which is NOT registered.`),n instanceof SyncDescriptor){const e={id:r.id,desc:n,_trace:t._trace.branch(r.id,!0)};i.insertEdge(t,e),s.push(e)}}}for(;;){const e=i.roots();if(0===e.length){if(!i.isEmpty())throw new CyclicDependencyError(i);break}for(const{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof SyncDescriptor){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}i.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,r=[],i,n){if(this._services.get(e)instanceof SyncDescriptor)return this._createServiceInstance(t,r,i,n);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,r,i,n);throw new Error("illegalState - creating UNKNOWN service instance "+t.name)}_createServiceInstance(e,t=[],r,i){if(r){const r=new IdleValue(()=>this._createInstance(e,t,i));return new Proxy(Object.create(null),{get(e,t){if(t in e)return e[t];let i=r.value,n=i[t];return"function"!=typeof n||(n=n.bind(i),e[t]=n),n},set:(e,t,i)=>(r.value[t]=i,!0)})}return this._createInstance(e,t,i)}}var TraceType;!function(e){e[e.Creation=0]="Creation",e[e.Invocation=1]="Invocation",e[e.Branch=2]="Branch"}(TraceType||(TraceType={}));class Trace{constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}static traceInvocation(e){return Trace._None}static traceCreation(e){return Trace._None}branch(e,t){let r=new Trace(2,e.toString());return this._dep.push([e,t,r]),r}stop(){let e=Date.now()-this._start;Trace._totals+=e;let t=!1;let r=[`${0===this.type?"CREATE":"CALL"} ${this.name}`,""+function e(r,i){let n=[],s=new Array(r+1).join("\t");for(const[o,a,l]of i._dep)if(a&&l){t=!0,n.push(`${s}CREATES -> ${o}`);let i=e(r+1,l);i&&n.push(i)}else n.push(`${s}uses -> ${o}`);return n.join("\n")}(1,this),`DONE, took ${e.toFixed(2)}ms (grand total ${Trace._totals.toFixed(2)}ms)`];(e>2||t)&&console.log(r.join("\n"))}}Trace._None=new class extends Trace{constructor(){super(-1,null)}stop(){}branch(){return this}},Trace._totals=0,exports.ArrayQueue=ArrayQueue,exports.AsyncEmitter=AsyncEmitter,exports.AsyncReferenceCollection=AsyncReferenceCollection,exports.AutoOpenBarrier=AutoOpenBarrier,exports.Barrier=Barrier,exports.CancellationTokenSource=CancellationTokenSource,exports.CommandsRegistry=CommandsRegistry,exports.ConfigKeysIterator=ConfigKeysIterator,exports.DebounceEmitter=DebounceEmitter,exports.DeferredPromise=DeferredPromise,exports.Delayer=Delayer,exports.Disposable=Disposable,exports.DisposableStore=DisposableStore,exports.Emitter=Emitter,exports.ErrorHandler=ErrorHandler,exports.EventBufferer=EventBufferer,exports.EventMultiplexer=EventMultiplexer,exports.FileAccess=FileAccess,exports.ICommandService=ICommandService,exports.IInstantiationService=IInstantiationService,exports.IdleValue=IdleValue,exports.ImmortalReference=ImmortalReference,exports.InstantiationService=InstantiationService,exports.IntervalCounter=IntervalCounter,exports.IntervalTimer=IntervalTimer,exports.LRUCache=LRUCache,exports.Limiter=Limiter,exports.LinkedList=LinkedList,exports.LinkedMap=LinkedMap,exports.MultiDisposeError=MultiDisposeError,exports.MutableDisposable=MutableDisposable,exports.NotImplementedProxy=NotImplementedProxy,exports.PathIterator=PathIterator,exports.PauseableEmitter=PauseableEmitter,exports.PlatformToString=PlatformToString,exports.QMBuffer=QMBuffer,exports.Queue=Queue,exports.ReadonlyMapView=ReadonlyMapView,exports.RefCountedDisposable=RefCountedDisposable,exports.ReferenceCollection=ReferenceCollection,exports.Relay=Relay,exports.RemoteAuthorities=RemoteAuthorities,exports.ResourceMap=ResourceMap,exports.ResourceQueue=ResourceQueue,exports.RunOnceScheduler=RunOnceScheduler,exports.RunOnceWorker=RunOnceWorker,exports.ScrollState=ScrollState,exports.Scrollable=Scrollable,exports.Sequence=Sequence,exports.Sequencer=Sequencer,exports.SequencerByKey=SequencerByKey,exports.ServiceCollection=ServiceCollection,exports.SimpleSequence=SimpleSequence,exports.SmoothScrollingOperation=SmoothScrollingOperation,exports.SmoothScrollingUpdate=SmoothScrollingUpdate,exports.StopWatch=StopWatch,exports.StringIterator=StringIterator,exports.SyncDescriptor=SyncDescriptor,exports.TaskSequentializer=TaskSequentializer,exports.TernarySearchTree=TernarySearchTree,exports.ThrottledDelayer=ThrottledDelayer,exports.ThrottledWorker=ThrottledWorker,exports.Throttler=Throttler,exports.TimeoutTimer=TimeoutTimer,exports.URI=URI,exports.UriIterator=UriIterator,exports.areFunctions=areFunctions,exports.arrayInsert=arrayInsert,exports.asArray=asArray,exports.asPromise=asPromise,exports.assertAllDefined=assertAllDefined,exports.assertIsDefined=assertIsDefined,exports.assertNever=assertNever,exports.assertType=assertType,exports.basename=basename$1,exports.binarySearch=binarySearch,exports.bufferToReadable=bufferToReadable,exports.bufferToStream=bufferToStream,exports.bufferedStreamToBuffer=bufferedStreamToBuffer,exports.canceled=canceled,exports.coalesce=coalesce,exports.coalesceInPlace=coalesceInPlace,exports.combinedDisposable=combinedDisposable,exports.commonPrefixLength=commonPrefixLength$1,exports.consumeReadable=consumeReadable,exports.consumeStream=consumeStream,exports.createCancelablePromise=createCancelablePromise,exports.createDecorator=createDecorator,exports.createProxyObject=createProxyObject,exports.createSyncDescriptor=createSyncDescriptor,exports.delimiter=delimiter,exports.delta=delta,exports.dirname=dirname$1,exports.disposableTimeout=disposableTimeout,exports.dispose=dispose,exports.distinct=distinct,exports.distinctES6=distinctES6,exports.emptyStream=emptyStream,exports.equals=equals,exports.errorHandler=errorHandler,exports.extname=extname$1,exports.findFirstInSorted=findFirstInSorted,exports.first=first,exports.firstOrDefault=firstOrDefault,exports.firstParallel=firstParallel,exports.flatten=flatten,exports.format=format,exports.fromNow=fromNow,exports.generateUuid=generateUuid,exports.getAllMethodNames=getAllMethodNames,exports.getAllPropertyNames=getAllPropertyNames,exports.getDriveLetter=getDriveLetter,exports.getOrSet=getOrSet,exports.getRandomElement=getRandomElement,exports.getRoot=getRoot,exports.getSingletonServiceDescriptors=getSingletonServiceDescriptors,exports.glob=glob,exports.globals=globals,exports.groupBy=groupBy,exports.hasDriveLetter=hasDriveLetter,exports.illegalState=illegalState,exports.index=index,exports.indexOfPath=indexOfPath,exports.insert=insert,exports.insertInto=insertInto,exports.isAbsolute=isAbsolute,exports.isAndroid=isAndroid,exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isDefined=isDefined,exports.isDisposable=isDisposable,exports.isEmptyObject=isEmptyObject,exports.isEqual=isEqual$1,exports.isEqualOrParent=isEqualOrParent$1,exports.isFalsyOrEmpty=isFalsyOrEmpty,exports.isFunction=isFunction,exports.isIOS=isIOS,exports.isIterable=isIterable,exports.isLinux=isLinux,exports.isLinuxSnap=isLinuxSnap,exports.isLittleEndian=isLittleEndian,exports.isMacintosh=isMacintosh,exports.isMobile=isMobile,exports.isMusic=isMusic,exports.isNative=isNative,exports.isNonEmptyArray=isNonEmptyArray,exports.isNumber=isNumber,exports.isObject=isObject,exports.isPathSeparator=isPathSeparator,exports.isPromiseCanceledError=isPromiseCanceledError,exports.isReadableBufferedStream=isReadableBufferedStream,exports.isReadableStream=isReadableStream,exports.isRootOrDriveLetter=isRootOrDriveLetter,exports.isString=isString,exports.isStringArray=isStringArray,exports.isThenable=isThenable,exports.isUNC=isUNC,exports.isUUID=isUUID,exports.isUndefined=isUndefined,exports.isUndefinedOrNull=isUndefinedOrNull,exports.isValidBasename=isValidBasename,exports.isWeb=isWeb,exports.isWindows=isWindows,exports.isWindowsDriveLetter=isWindowsDriveLetter,exports.join=join,exports.lastIndex=lastIndex,exports.listenStream=listenStream,exports.mapArrayOrNot=mapArrayOrNot,exports.mapFind=mapFind,exports.mapToString=mapToString,exports.markAsSingleton=markAsSingleton,exports.maxIndex=maxIndex,exports.minIndex=minIndex,exports.move=move,exports.newWriteableBufferStream=newWriteableBufferStream,exports.newWriteableStream=newWriteableStream,exports.normalize=normalize,exports.onUnexpectedError=onUnexpectedError,exports.once=once,exports.optional=optional,exports.parse=parse$1,exports.parseLineAndColumnAware=parseLineAndColumnAware,exports.peekReadable=peekReadable,exports.peekStream=peekStream,exports.platform=platform$1,exports.posix=posix,exports.prefixedBufferReadable=prefixedBufferReadable,exports.prefixedBufferStream=prefixedBufferStream,exports.prefixedReadable=prefixedReadable,exports.prefixedStream=prefixedStream,exports.process=process$1,exports.pushToEnd=pushToEnd,exports.pushToStart=pushToStart,exports.quickSelect=quickSelect,exports.raceCancellablePromises=raceCancellablePromises,exports.raceCancellation=raceCancellation,exports.raceTimeout=raceTimeout,exports.range=range,exports.readUInt16LE=readUInt16LE,exports.readUInt32BE=readUInt32BE,exports.readUInt32LE=readUInt32LE,exports.readUInt8=readUInt8,exports.readableToBuffer=readableToBuffer,exports.refineServiceDecorator=refineServiceDecorator,exports.registerSingleton=registerSingleton,exports.relative=relative,exports.remove=remove,exports.resolve=resolve,exports.resources=resources,exports.retry=retry,exports.sanitizeFilePath=sanitizeFilePath,exports.sep=sep,exports.sequence=sequence,exports.setDisposableTracker=setDisposableTracker,exports.setGlobalLeakWarningThreshold=setGlobalLeakWarningThreshold,exports.setImmediate=setImmediate,exports.setToString=setToString,exports.setUnexpectedErrorHandler=setUnexpectedErrorHandler,exports.shuffle=shuffle,exports.sortedDiff=sortedDiff,exports.splice=splice,exports.streamToBuffer=streamToBuffer,exports.streamToBufferReadableStream=streamToBufferReadableStream,exports.strings=strings,exports.tail=tail,exports.tail2=tail2,exports.timeout=timeout,exports.toDisposable=toDisposable,exports.toErrorMessage=toErrorMessage,exports.toLocalISOString=toLocalISOString,exports.toNamespacedPath=toNamespacedPath,exports.toPosixPath=toPosixPath,exports.toReadable=toReadable,exports.toSlashes=toSlashes,exports.toStream=toStream,exports.toUint32=toUint32,exports.toUint8=toUint8,exports.top=top,exports.topAsync=topAsync,exports.transform=transform,exports.uniqueFilter=uniqueFilter,exports.uriToFsPath=uriToFsPath,exports.userAgent=userAgent,exports.validateConstraint=validateConstraint,exports.validateConstraints=validateConstraints,exports.win32=win32,exports.withNullAsUndefined=withNullAsUndefined,exports.withUndefinedAsNull=withUndefinedAsNull,exports.writeUInt16LE=writeUInt16LE,exports.writeUInt32BE=writeUInt32BE,exports.writeUInt32LE=writeUInt32LE,exports.writeUInt8=writeUInt8;